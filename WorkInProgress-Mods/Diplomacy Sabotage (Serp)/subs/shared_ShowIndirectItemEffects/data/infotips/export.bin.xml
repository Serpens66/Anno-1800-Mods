<ModOps>
    <!-- https://github.com/anno-mods/modding-guide/blob/main/documentation/infotips.md -->
  
  <!-- using the Costs property, because we can fetch it here, unlike eg. buffs caused by the projectile of an item. -->
    <!-- So to show buffs caused by the projectile of your item, you can simply add your buff GUIDs as Ingredient (Amount=1) -->
     <!-- to the Cost/Costs property of your Item -->
  
  <!-- Amount of first Ingredient: -->
  <!-- Amount = 1 , no big header -->
  <!-- Amount = 2 A big header over all effects will be: Projectile Effect -->
  <!-- Amount = 3 A big header over the all buffs will be the first Buff name -->
  <!-- Amount = 4 A big header "Projectile Effect" over the one buff and then the buff name as minor header -->
  <!-- Amount >= 5 : not defined yet. Your custom big header text in ValueAssetMap -->
      
  <!-- The amount of the 2nd Ingredient (if there is any) determines if you want a minor header for every different buff: -->
   <!-- Amount = 1 , no minor header -->
   <!-- Amount = 2 , buff name as minor header -->
  

  <ModOp Type="AddNextSibling" Path="//InfoTipData[Guid='25000083' or Guid='25000084']/InfoElement/InfoElement/InfoElement[InfoElement/Text/Text='[AssetData([ToolOneHelper StatusEffectChainDescription([RefGuid])]) Text]']">
    <InfoElement>
      <ElementType>8</ElementType>
      <ChildCount>1</ChildCount>
      <VisibilityElement>
        <ElementType>
          <ElementType>2</ElementType>
        </ElementType>
        <ChildCount>1</ChildCount>
        <VisibilityElement>
          <ElementType>
            <ElementType>1</ElementType>
          </ElementType>
          <CompareOperator>
            <CompareOperator>1</CompareOperator>
          </CompareOperator>
          <ResultType>
            <ResultType>1</ResultType>
          </ResultType>
          <Condition>[ToolOneHelper BuildCost([RefGuid]) Costs COUNT]</Condition>
        </VisibilityElement>
        <OperatorType />
      </VisibilityElement>
      <!-- if Amount-0 is bigger than 1, show a big header -->
      <InfoElement>
        <ElementType>8</ElementType>
        <ChildCount>1</ChildCount>
        <VisibilityElement>
          <ElementType>
            <ElementType>2</ElementType>
          </ElementType>
          <ChildCount>1</ChildCount>
          <VisibilityElement>
            <ElementType>
              <ElementType>1</ElementType>
            </ElementType>
            <CompareOperator>
              <CompareOperator>5</CompareOperator>
            </CompareOperator>
            <ResultType>
              <ResultType>1</ResultType>
            </ResultType>
            <ExpectedValueInt>1</ExpectedValueInt>
            <Condition>[ToolOneHelper BuildCost([RefGuid]) Costs AT(0) Amount]</Condition>
          </VisibilityElement>
          <OperatorType />
        </VisibilityElement>
        <InfoElement>
          <ElementType>1</ElementType>
          <VisibilityElement>
            <ElementType>
              <ElementType>2</ElementType>
            </ElementType>
            <ChildCount>1</ChildCount>
            <VisibilityElement>
              <ElementType>
                <ElementType>1</ElementType>
              </ElementType>
              <CompareOperator>
                <CompareOperator>0</CompareOperator>
              </CompareOperator>
              <ResultType>
                <ResultType>1</ResultType>
              </ResultType>
              <ExpectedValueInt>2</ExpectedValueInt>
              <Condition>[ToolOneHelper BuildCost([RefGuid]) Costs AT(0) Amount]</Condition>
            </VisibilityElement>
            <VisibilityElement>
              <ElementType>
                <ElementType>1</ElementType>
              </ElementType>
              <CompareOperator>
                <CompareOperator>0</CompareOperator>
              </CompareOperator>
              <ResultType>
                <ResultType>1</ResultType>
              </ResultType>
              <ExpectedValueInt>5</ExpectedValueInt>
              <Condition>[ToolOneHelper BuildCost([RefGuid]) Costs AT(0) Amount]</Condition>
            </VisibilityElement>
            <OperatorType>
              <OperatorType>1</OperatorType>
            </OperatorType>
          </VisibilityElement>
          <Icon>
            <IconText>[AssetData(1500006106) Icon]</IconText>
            <Style />
          </Icon>
          <Text>
            <Text>[AssetForValue(1500006106, [ToolOneHelper BuildCost([RefGuid]) Costs AT(0) Amount]) Text]</Text>
            <Style />
          </Text>
          <BackgroundType />
        </InfoElement>
        <InfoElement>
          <ElementType>1</ElementType>
          <VisibilityElement>
            <ElementType>
              <ElementType>2</ElementType>
            </ElementType>
            <ChildCount>1</ChildCount>
            <VisibilityElement>
              <ElementType>
                <ElementType>1</ElementType>
              </ElementType>
              <CompareOperator>
                <CompareOperator>0</CompareOperator>
              </CompareOperator>
              <ResultType>
                <ResultType>1</ResultType>
              </ResultType>
              <ExpectedValueInt>3</ExpectedValueInt>
              <Condition>[ToolOneHelper BuildCost([RefGuid]) Costs AT(0) Amount]</Condition>
            </VisibilityElement>
            <VisibilityElement>
              <ElementType>
                <ElementType>1</ElementType>
              </ElementType>
              <CompareOperator>
                <CompareOperator>0</CompareOperator>
              </CompareOperator>
              <ResultType>
                <ResultType>1</ResultType>
              </ResultType>
              <ExpectedValueInt>6</ExpectedValueInt>
              <Condition>[ToolOneHelper BuildCost([RefGuid]) Costs AT(0) Amount]</Condition>
            </VisibilityElement>
            <OperatorType>
              <OperatorType>1</OperatorType>
            </OperatorType>
          </VisibilityElement>
          <Icon>
            <IconText>[AssetData([ItemAssetData([RefGuid]) UsedProjectile]) Icon]</IconText>
            <Style />
          </Icon>
          <Text>
            <Text>[AssetForValue(1500006106, [ToolOneHelper BuildCost([RefGuid]) Costs AT(0) Amount]) Text]</Text>
            <Style />
          </Text>
          <BackgroundType />
        </InfoElement>
        <InfoElement>
          <ElementType>1</ElementType>
          <VisibilityElement>
            <ElementType>
              <ElementType>2</ElementType>
            </ElementType>
            <ChildCount>1</ChildCount>
            <VisibilityElement>
              <ElementType>
                <ElementType>1</ElementType>
              </ElementType>
              <CompareOperator>
                <CompareOperator>0</CompareOperator>
              </CompareOperator>
              <ResultType>
                <ResultType>1</ResultType>
              </ResultType>
              <ExpectedValueInt>4</ExpectedValueInt>
              <Condition>[ToolOneHelper BuildCost([RefGuid]) Costs AT(0) Amount]</Condition>
            </VisibilityElement>
            <OperatorType />
          </VisibilityElement>
          <Icon>
            <IconText>[ToolOneHelper BuildCost([RefGuid]) Costs AT(0) Icon]</IconText>
            <Style />
          </Icon>
          <Text>
            <Text>[ToolOneHelper BuildCost([RefGuid]) Costs AT(0) Name]</Text>
            <Style />
          </Text>
          <BackgroundType />
        </InfoElement>
        <!-- if amount is bigger than 6 then display the custom text and icon based on AssetForValue in GUID 1500006106 -->
        <InfoElement>
          <ElementType>1</ElementType>
          <VisibilityElement>
            <ElementType>
              <ElementType>2</ElementType>
            </ElementType>
            <ChildCount>1</ChildCount>
            <VisibilityElement>
              <ElementType>
                <ElementType>1</ElementType>
              </ElementType>
              <CompareOperator>
                <CompareOperator>5</CompareOperator>
              </CompareOperator>
              <ResultType>
                <ResultType>1</ResultType>
              </ResultType>
              <ExpectedValueInt>6</ExpectedValueInt>
              <Condition>[ToolOneHelper BuildCost([RefGuid]) Costs AT(0) Amount]</Condition>
            </VisibilityElement>
            <OperatorType>
              <OperatorType>1</OperatorType>
            </OperatorType>
          </VisibilityElement>
          <Icon>
            <IconText>[AssetForValue(1500006106, [ToolOneHelper BuildCost([RefGuid]) Costs AT(0) Amount]) Icon]</IconText>
            <Style />
          </Icon>
          <Text>
            <Text>[AssetForValue(1500006106, [ToolOneHelper BuildCost([RefGuid]) Costs AT(0) Amount]) Text]</Text>
            <Style />
          </Text>
          <BackgroundType />
        </InfoElement>
      </InfoElement>
      <!-- looping over all costs to display their GUID as Buff effects -->
      <InfoElement>
        <ElementType>7</ElementType>
        <ChildCount>1</ChildCount>
        <VisibilityElement>
          <ElementType>
            <ElementType>2</ElementType>
          </ElementType>
          <OperatorType />
        </VisibilityElement>
        <!-- if Amount-0 = 5 or 6 or Amount-1 = 2 use Buffname as header here per used buff  -->
        <InfoElement>
          <ElementType>8</ElementType>
          <ChildCount>2</ChildCount>
          <VisibilityElement>
            <ElementType>
              <ElementType>2</ElementType>
            </ElementType>
            <ChildCount>1</ChildCount>
            <VisibilityElement>
              <ElementType>
                <ElementType>1</ElementType>
              </ElementType>
              <CompareOperator>
                <CompareOperator>0</CompareOperator>
              </CompareOperator>
              <ResultType>
                <ResultType>1</ResultType>
              </ResultType>
              <ExpectedValueInt>5</ExpectedValueInt>
              <Condition>[ToolOneHelper BuildCost([RefGuid]) Costs AT(0) Amount]</Condition>
            </VisibilityElement>
            <VisibilityElement>
              <ElementType>
                <ElementType>1</ElementType>
              </ElementType>
              <CompareOperator>
                <CompareOperator>0</CompareOperator>
              </CompareOperator>
              <ResultType>
                <ResultType>1</ResultType>
              </ResultType>
              <ExpectedValueInt>6</ExpectedValueInt>
              <Condition>[ToolOneHelper BuildCost([RefGuid]) Costs AT(0) Amount]</Condition>
            </VisibilityElement>
            <VisibilityElement>
              <ElementType>
                <ElementType>1</ElementType>
              </ElementType>
              <CompareOperator>
                <CompareOperator>0</CompareOperator>
              </CompareOperator>
              <ResultType>
                <ResultType>1</ResultType>
              </ResultType>
              <ExpectedValueInt>2</ExpectedValueInt>
              <Condition>[ToolOneHelper BuildCost([RefGuid]) Costs AT(1) Amount]</Condition>
            </VisibilityElement>
            <OperatorType>
              <OperatorType>1</OperatorType>
            </OperatorType>
          </VisibilityElement>
          <InfoElement>
            <ElementType>4</ElementType>
            <VisibilityElement>
              <ElementType>
                <ElementType>2</ElementType>
              </ElementType>
              <OperatorType />
            </VisibilityElement>
            <Icon>
              <IconText>[ToolOneHelper BuildCost([RefGuid]) Costs AT(#index0#) Icon]</IconText>
              <Style />
            </Icon>
            <Text>
              <Text>[ToolOneHelper BuildCost([RefGuid]) Costs AT(#index0#) Name]</Text>
              <Style />
            </Text>
            <BackgroundType />
          </InfoElement>
          <InfoElement>
            <ElementType>6</ElementType>
            <VisibilityElement>
              <ElementType>
                <ElementType>2</ElementType>
              </ElementType>
              <OperatorType />
            </VisibilityElement>
            <Text>
              <Style />
            </Text>
          </InfoElement>
        </InfoElement>
        <!-- now the buff effects -->
        <InfoElement>
          <ElementType>19</ElementType>
          <VisibilityElement>
            <ElementType>
              <ElementType>2</ElementType>
            </ElementType>
            <ChildCount>1</ChildCount>
            <VisibilityElement>
              <ElementType>
                <ElementType>1</ElementType>
              </ElementType>
              <CompareOperator>
                <CompareOperator>1</CompareOperator>
              </CompareOperator>
              <ResultType>
                <ResultType>1</ResultType>
              </ResultType>
              <Condition>[ToolOneHelper BuildCost([RefGuid]) Costs AT(#index0#) ProductGUID]</Condition>
            </VisibilityElement>
            <OperatorType />
          </VisibilityElement>
          <TemplateGUID>454144439</TemplateGUID>
          <Variables>
            <None>
              <Name>ItemGuid</Name>
              <Source>[ToolOneHelper BuildCost([RefGuid]) Costs AT(#index0#) ProductGUID]</Source>
            </None>
          </Variables>
        </InfoElement>
        
        <InfoElement>
          <ElementType>5</ElementType>
          <VisibilityElement>
            <ElementType>
              <ElementType>2</ElementType>
            </ElementType>
            <OperatorType />
          </VisibilityElement>
          <Text>
            <Text>[ItemAssetData([ToolOneHelper BuildCost([RefGuid]) Costs AT(#index0#) ProductGUID]) ItemOrBuffEffectTargetsFormatted]</Text>
            <Style />
          </Text>
          <BackgroundType />
        </InfoElement>
        
        
        <InfoElement>
          <ElementType>6</ElementType>
          <VisibilityElement>
            <ElementType>
              <ElementType>2</ElementType>
            </ElementType>
            <OperatorType />
          </VisibilityElement>
          <Text>
            <Style />
          </Text>
        </InfoElement>
        <Source>[ToolOneHelper BuildCost([RefGuid]) Costs COUNT]</Source>
      </InfoElement>
    </InfoElement>
  
  </ModOp>
  
  <!-- ########################################################################### -->
  
  
  
  <!-- only show the Trade Tooltip for the item, if its ItemTradePrice is bigger 0  -->
  <ModOp Type="AddNextSibling" Path="//InfoTipData[Guid='25000083' or Guid='25000084']/InfoElement/InfoElement/InfoElement[InfoElement/Text/TextGUID='2387']/VisibilityElement/VisibilityElement[Condition='[ToolOneHelper IsItemRarityQuest([RefGuid])' or Condition='[ToolOneHelper IsItemRarityQuest([RefGuid])]']">
    <VisibilityElement>
      <ElementType>
        <ElementType>1</ElementType>
      </ElementType>
      <CompareOperator>
        <CompareOperator>5</CompareOperator>
      </CompareOperator>
      <ResultType>
        <ResultType>1</ResultType>
      </ResultType>
      <Condition>[ToolOneHelper ItemTradePrice([RefGuid])]</Condition>
    </VisibilityElement>
  </ModOp>
  
  <!-- using ExpeditionAttribute/FluffText ExpeditionItemFluff = 1500006107 to prevent the display of Donate and Transfer Tooltip -->
  <!-- Dont display the ExpeditionItemFluff GUID 1500006107 itself in xpedition Tooltip -->
  <ModOp Type="AddNextSibling" Path="//InfoTipData[Guid='500933']/InfoElement/VisibilityElement/VisibilityElement[Condition='[ToolOneHelper ExpeditionItemFluff([RefGuid]) Guid]' and CompareOperator/CompareOperator='1']">
    <VisibilityElement>
      <ElementType>
        <ElementType>1</ElementType>
      </ElementType>
      <CompareOperator>
        <CompareOperator>1</CompareOperator>
      </CompareOperator>
      <ResultType>
        <ResultType>1</ResultType>
      </ResultType>
      <ExpectedValueInt>1500006107</ExpectedValueInt>
      <Condition>[ToolOneHelper ExpeditionItemFluff([RefGuid]) Guid]</Condition>
    </VisibilityElement>
  </ModOp>
  <!-- Do not show Donating Tooltip if ExpeditionItemFluff is 1500006107 -->
  <ModOp Type="AddNextSibling" Path="//InfoTipData[Guid='25000083' or Guid='25000084']/InfoElement/InfoElement/InfoElement/VisibilityElement/VisibilityElement[Condition='[Research IsItemUnderCursorDonatable]']">
    <VisibilityElement>
      <ElementType>
        <ElementType>1</ElementType>
      </ElementType>
      <CompareOperator>
        <CompareOperator>1</CompareOperator>
      </CompareOperator>
      <ResultType>
        <ResultType>1</ResultType>
      </ResultType>
      <ExpectedValueInt>1500006107</ExpectedValueInt>
      <Condition>[ToolOneHelper ExpeditionItemFluff([RefGuid]) Guid]</Condition>
    </VisibilityElement>
  </ModOp>
  <!-- Do not show Transfer Tooltip if ExpeditionItemFluff is 1500006107 (obviously the check "IsDirectTransferAllowed" does not care for Items which have TransferBlocked..) -->
  <ModOp Type="AddNextSibling" Path="//InfoTipData[Guid='25000084']/InfoElement/VisibilityElement/VisibilityElement[Condition='[StaticData TransferActions IsDirectTransferAllowed]']">
    <VisibilityElement>
      <ElementType>
        <ElementType>1</ElementType>
      </ElementType>
      <CompareOperator>
        <CompareOperator>1</CompareOperator>
      </CompareOperator>
      <ResultType>
        <ResultType>1</ResultType>
      </ResultType>
      <ExpectedValueInt>1500006107</ExpectedValueInt>
      <Condition>[ToolOneHelper ExpeditionItemFluff([RefGuid]) Guid]</Condition>
    </VisibilityElement>
  </ModOp>
  
  

</ModOps>