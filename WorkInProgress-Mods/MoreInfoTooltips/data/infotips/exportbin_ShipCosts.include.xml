<ModOps>
  
  <!-- https://github.com/jakobharder/anno1800-mod-loader/blob/main/doc/modloader11.md#patching-infotip-exportbin -->
    <!-- to export the tooltips from the game use FileDBReader and the FileFormat "infotip.xml" and unpack "data\infotips\export.bin" -->
    <!-- or download it in anno modding discord here: -->
    <!-- https://discord.com/channels/578443209940926465/1146098268850376816/1149910673678159964 -->




  <!-- guid 500057 is responsible for tooltips showing when hovering over buildable ships in the shipyard -->
  <!-- first half of this guid is without gamepadmode and the other half is with gamepadmode -->
  
  
  <!-- This mod file makes all details of ship tooltip in shipyard visible even if it is not unlocked yet or one has no permit -->
  
  
  
  <!-- We will remove the condition to not show all the information when the ship is not unlocked yet -->
  <ModOp Type="remove" Path="//InfoTipData[Guid='500057']/InfoElement/VisibilityElement/VisibilityElement[Condition='[Unlock IsUnlocked([RefGuid])]' and (not(ExpectedValueBool) or ExpectedValueBool='True')]" />
  <!-- remove the condition "needs no permit or you have a permit" to display the influence costs/construction time and so on -->
  <ModOp Type="remove" Path="//InfoTipData[Guid='500057']/InfoElement/InfoElement/VisibilityElement/VisibilityElement[VisibilityElement[Condition='[Research IsGodlikePermit([Selection Object Shipyard BuildCostForShip([RefGuid]) Costs AT(0) ProductGUID])]' and ExpectedValueBool='False'] and VisibilityElement[Condition='[BuildPermits BuildPermits([RefGuid])]' and CompareOperator/CompareOperator='5']]" />

  <!-- ########### -->

  <!-- move the warning (and precondition) that the ship is not unlocked to the bottom (above the warning that you dont have enough permits) -->
    <!-- because this is near the buildcosts and usually the first place to look at when hovering over a ship -->
  <!-- copy paste the content (makes it more compatible to copy it) -->
  <ModOp Type="AddPrevSibling" Path="//InfoTipData[Guid='500057']/InfoElement[InfoElement/Text/TextGUID='270045']" Content="//InfoTipData[Guid='500057']/InfoElement[VisibilityElement/VisibilityElement[Condition='[Unlock IsUnlocked([RefGuid])]' and ExpectedValueBool='False'] and InfoElement/Text/TextGUID='1092']">
    <ModOpContent/>
  </ModOp>
  <!-- remove the vanilla one (the first we find) -->
  <ModOp Type="remove" Path="//InfoTipData[Guid='500057']/InfoElement[VisibilityElement/VisibilityElement[Condition='[Unlock IsUnlocked([RefGuid])]' and ExpectedValueBool='False'] and InfoElement/Text/TextGUID='1092'][1]"></ModOp>
  <!-- remove text 1092 ("not unlocked") because it looks odd now and you see the Condition for the unlock, that should be enough. -->
  <ModOp Type="remove" Path="//InfoTipData[Guid='500057']/InfoElement/InfoElement[Text/TextGUID='1092']"></ModOp>
  <!-- highlight the great eastern condition as warning -->
  <ModOp Type="merge" Path="//InfoTipData[Guid='500057']/InfoElement/InfoElement[Text/TextGUID='270045']">
    <ElementType>3</ElementType>
    <WarningType>
      <WarningType>2</WarningType>
    </WarningType>
  </ModOp>





  <!-- ############ -->

  <!-- den permit als baukosten mit 0/1 auch bei nicht-payable anzeigen (so wie im fixmod mit godlike icon) -->
    <!-- keep in mind that we are loading after the bugfix mod, so the condition looks a bit different than in vanilla (with index instead of 0) -->
  <ModOp Type="AddNextSibling" Path="//InfoTipData[Guid='500057']//InfoElement[VisibilityElement/VisibilityElement[Condition='[Research IsGodlikePermit([Selection Object Shipyard BuildCostForShip([RefGuid]) Costs AT(#index0#) ProductGUID])]' and (not(ExpectedValueBool) or ExpectedValueBool='True')] and VisibilityElement/VisibilityElement[Condition='[Selection Object Shipyard BuildCostForShip([RefGuid]) Costs AT(#index0#) ProductGUID]'] and VisibilityElement/VisibilityElement[Condition='[Selection Object Shipyard BuildCostForShip([RefGuid]) Payable AT(#index0#)]' and (not(ExpectedValueBool) or ExpectedValueBool='True')]]">
    <InfoElement>
      <ElementType>11</ElementType>
      <VisibilityElement>
        <ElementType>
          <ElementType>2</ElementType>
        </ElementType>
        <ChildCount>3</ChildCount>
        <VisibilityElement>
          <ElementType>
            <ElementType>1</ElementType>
          </ElementType>
          <CompareOperator />
          <ResultType />
          <ExpectedValueBool>False</ExpectedValueBool>
          <Condition>[Selection Object Shipyard BuildCostForShip([RefGuid]) Payable AT(#index0#)]</Condition>
        </VisibilityElement>
        <VisibilityElement>
          <ElementType>
            <ElementType>1</ElementType>
          </ElementType>
          <CompareOperator>
            <CompareOperator>1</CompareOperator>
          </CompareOperator>
          <ResultType>
            <ResultType>1</ResultType>
          </ResultType>
          <ExpectedValueInt>1010190</ExpectedValueInt>
          <Condition>[Selection Object Shipyard BuildCostForShip([RefGuid]) Costs AT(#index0#) ProductGUID]</Condition>
        </VisibilityElement>
        <VisibilityElement>
          <ElementType>
            <ElementType>1</ElementType>
          </ElementType>
          <CompareOperator />
          <ResultType />
          <Condition>[Research IsGodlikePermit([Selection Object Shipyard BuildCostForShip([RefGuid]) Costs AT(#index0#) ProductGUID])]</Condition>
        </VisibilityElement>
        <OperatorType />
      </VisibilityElement>
      <Icon>
        <IconGUID>124843</IconGUID>
        <Style />
      </Icon>
      <Text>
        <Text>[Selection Object Shipyard BuildCostForShip([RefGuid]) Available AT(#index0#)]/[Selection Object Shipyard BuildCostForShip([RefGuid]) Values AT(#index0#)]</Text>
        <Style />
      </Text>
      <WarningType>
        <WarningType>2</WarningType>
      </WarningType>
    </InfoElement>
  </ModOp>

  <!-- don't show "click to build the ship" if it is not unlocked or needs godlike and has no permit -->
  <ModOp Type="AddNextSibling" Path="//InfoTipData[Guid='500057']//InfoElement[InfoElement/Text/TextGUID='10611' or InfoElement/Text/TextGUID='10612']/InfoElement/VisibilityElement/VisibilityElement">
    <VisibilityElement>
      <ElementType>
        <ElementType>1</ElementType>
      </ElementType>
      <CompareOperator />
      <ResultType />
      <Condition>[Unlock IsUnlocked([RefGuid])]</Condition>
    </VisibilityElement>
    <VisibilityElement>
      <ElementType>
        <ElementType>2</ElementType>
      </ElementType>
      <ChildCount>1</ChildCount>
      <VisibilityElement>
        <ElementType>
          <ElementType>1</ElementType>
        </ElementType>
        <CompareOperator />
        <ResultType />
        <ExpectedValueBool>False</ExpectedValueBool>
        <Condition>[Research IsGodlikePermit([Selection Object Shipyard BuildCostForShip([RefGuid]) Costs AT(0) ProductGUID])]</Condition>
      </VisibilityElement>
      <VisibilityElement>
        <ElementType>
          <ElementType>1</ElementType>
        </ElementType>
        <CompareOperator>
          <CompareOperator>5</CompareOperator>
        </CompareOperator>
        <ResultType>
          <ResultType>1</ResultType>
        </ResultType>
        <Condition>[BuildPermits BuildPermits([RefGuid])]</Condition>
      </VisibilityElement>
      <OperatorType>
        <OperatorType>1</OperatorType>
      </OperatorType>
    </VisibilityElement>
  </ModOp>
  



  <!-- see how well the buildcosts are displayed if we allow more columns, vanilla is 2, but there is so much space between them, lets test 4/6 -->
  <!-- hm for whatever reason changing this number seems to do nothing.. -->
  <!-- <ModOp Type="replace" Path="//InfoTipData[Guid='500057']//InfoElement[Columns='2']/Columns"> -->
    <!-- <Columns>4</Columns> -->
  <!-- </ModOp> -->




  <!-- replace ALL BuildCostForShip displays, regardless which one, with not only showing the costs, but also the current amount -->
  <ModOp Type="replace" Path="//InfoTipData[Guid='500057']//InfoElement/Text/Text[text()='[Selection Object Shipyard BuildCostForShip([RefGuid]) Values AT(#index0#)]']">
    <Text>[Selection Object Shipyard BuildCostForShip([RefGuid]) Available AT(#index0#)]/[Selection Object Shipyard BuildCostForShip([RefGuid]) Values AT(#index0#)]</Text>
  </ModOp>
  

  

  
</ModOps>