<ModOps>
  
  <!-- turrets added to the great eastern graphics by "S1LV3R-p0tat0" -->
  
  <!-- with the current turrest graphic there is a bug though. As soon as the <TurnSpan> is bigger than 182, -->
   <!-- half of the turrets point in the wrong direction for whatever reason. But 182 is fine I think -->
  
  <!-- Uses Serp GUIDs 1500003500 to 1500003504 (reserviert bis einschließlich 1500003504) -->
  <!-- und nochmal von 1500003800 bis einschließlich 1500003809 freigehalten -->
  <!-- 1500003801 und 1500003803 bis 1500003809 ist frei -->
  
  <!-- roughly double the attack compared to vanilla flagship -->
  
  
  <ModOp GUID="118718" Type="AddNextSibling">
    <Asset>
      <Template>WarShip</Template>
      <Values>
        <Standard>
          <GUID>1500003500</GUID>
          <Name>Steam Flagship Great Eatern</Name>
          <IconFilename>data/ui/2kimages/main/3dicons/ships/icon_ship_real_great_eastern.png</IconFilename>
          <InfoDescription>1085</InfoDescription>
        </Standard>
        <Object>
          <Variations>
            <Item>
          <Filename>data/modgraphics/bysilverpotato/vehicle/big_colony01_01/big_colony01_01.cfg</Filename>
            </Item>
          </Variations>
          <Skins>
            <DefaultSkinName>118718</DefaultSkinName>
            <DefaultSkinCategoryName>7312</DefaultSkinCategoryName>
            <SkinList>
              <Item>
                <SkinAssetGuid>80149</SkinAssetGuid>
              </Item>
            </SkinList>
          </Skins>
        </Object>
        <Mesh>
          <MeshPlacement>OnWaterSlope</MeshPlacement>
        </Mesh>
        <Selection>
          <MultiSelectable>1</MultiSelectable>
          <OnSelection>
            <IsBaseAutoCreateAsset>1</IsBaseAutoCreateAsset>
            <Values>
              <ActionList />
            </Values>
          </OnSelection>
        </Selection>
        <Walking>
          <ShortenSailsAfter>0</ShortenSailsAfter>
          <ReservationLength>16</ReservationLength>
          <ReservationWidth>6</ReservationWidth>
          <PathPlannerLayer>Water</PathPlannerLayer>
          <ExpensiveDirSmoothing>1</ExpensiveDirSmoothing>
          <TurnAroundRadius>8</TurnAroundRadius>
          <Acceleration>0.75</Acceleration>
          <Deceleration>1</Deceleration>
          <TurnRadius>8</TurnRadius>
          <TurnSpeedInPlace>20</TurnSpeedInPlace>
          <TurnDeceleration>0</TurnDeceleration>
          <TurnMovement>0</TurnMovement>
          <LeaningMaxAngle>-10</LeaningMaxAngle>
          <ForwardSpeed>6.0</ForwardSpeed>
          <WindMinSlowdownFactor>1</WindMinSlowdownFactor>
          <WindMaxSpeedupFactor>1</WindMaxSpeedupFactor>
          <CargoFullFactor>0.8</CargoFullFactor>
          <DamageFullFactor>0.5</DamageFullFactor>
          <MinSlowdownFactor>0.5</MinSlowdownFactor>
          <CurveSegmentDensity>High</CurveSegmentDensity>
          <SessionTransferSpeedFactor>1.3</SessionTransferSpeedFactor>
        </Walking>
        <Text />
        <CommandQueue>
          <IsFlagship>1</IsFlagship>
          <FormationPriority>1</FormationPriority>
          <TradeShipPoints>5</TradeShipPoints>
          <MilitaryShipPoints>4.1</MilitaryShipPoints>
          <PriorityShipList>2</PriorityShipList>
          <ShipUniqueType>GreatEastern</ShipUniqueType>
          <InsecurityAttractiveness>-10</InsecurityAttractiveness>
        </CommandQueue>
        <Drifting>
          <OverrideAssetWidthAndLength>0</OverrideAssetWidthAndLength>
          <Length>7</Length>
          <Width>1.5</Width>
          <FactorMovement>0.7</FactorMovement>
          <FactorRotation>0.65</FactorRotation>
        </Drifting>
        <Collector />
        <Attackable>
          <MaximumHitPoints>10000</MaximumHitPoints>
          <AlertRange>150</AlertRange>
          <HPBarOffset>4</HPBarOffset>
          <SelfHealPerHealTick>2.222</SelfHealPerHealTick>
          <SelfHealPausedTimeIfAttacked>60000</SelfHealPausedTimeIfAttacked>
        </Attackable>
        <Attacker>
          <BaseDamage>300</BaseDamage>
          <ReloadTime>40</ReloadTime>
          <TargetAngleVariation>50</TargetAngleVariation>
          <AttackRangeApproachPercentage>0.85</AttackRangeApproachPercentage>
          <AttackRange>75</AttackRange>
          <LineOfSightRange>100</LineOfSightRange>
          <ProjectileAsset>11478</ProjectileAsset>
          <TurretExplosionEffectAsset>101994</TurretExplosionEffectAsset>
          <FullVolleyTimeMin>0.2</FullVolleyTimeMin>
          <FullVolleyTimeMax>0.8</FullVolleyTimeMax>
          <VolleyMaxPerBulletRandomOffset>0.2</VolleyMaxPerBulletRandomOffset>
          <AccuracyBase>2</AccuracyBase>
          <AccuracyIncreaseOverDistance>60</AccuracyIncreaseOverDistance>
          <AccuracySpeedDecay>20</AccuracySpeedDecay>
          <ShootingTracking>TurretFixed</ShootingTracking>
          <ProjectileCount>8</ProjectileCount>
          <Turrets>
            <Item>
              <TurnSpan>182</TurnSpan>
              <TurretCfg>data/modgraphics/bysilverpotato/vehicle/big_colony01_01/big_colony01_01_turret.cfg</TurretCfg>
            </Item>
            <Item>
              <TurnSpan>182</TurnSpan>
              <TurretCfg>data/modgraphics/bysilverpotato/vehicle/big_colony01_01/big_colony01_01_turret.cfg</TurretCfg>
            </Item>
            <Item>
              <TurnSpan>182</TurnSpan>
              <TurretCfg>data/modgraphics/bysilverpotato/vehicle/big_colony01_01/big_colony01_01_turret.cfg</TurretCfg>
            </Item>
            <Item>
              <TurnSpan>182</TurnSpan>
              <TurretCfg>data/modgraphics/bysilverpotato/vehicle/big_colony01_01/big_colony01_01_turret.cfg</TurretCfg>
            </Item>
            <Item>
              <TurnSpan>182</TurnSpan>
              <TurretCfg>data/modgraphics/bysilverpotato/vehicle/big_colony01_01/big_colony01_01_turret.cfg</TurretCfg>
            </Item>
            <Item>
              <TurnSpan>182</TurnSpan>
              <TurretCfg>data/modgraphics/bysilverpotato/vehicle/big_colony01_01/big_colony01_01_turret.cfg</TurretCfg>
            </Item>
            <Item>
              <TurnSpan>182</TurnSpan>
              <TurretCfg>data/modgraphics/bysilverpotato/vehicle/big_colony01_01/big_colony01_01_turret.cfg</TurretCfg>
            </Item>
            <Item>
              <TurnSpan>182</TurnSpan>
              <TurretCfg>data/modgraphics/bysilverpotato/vehicle/big_colony01_01/big_colony01_01_turret.cfg</TurretCfg>
            </Item>
          </Turrets>
          <MuzzleEffectAssets>
            <Item>
              <MuzzleEffectAsset>102228</MuzzleEffectAsset>
            </Item>
            <Item>
              <MuzzleEffectAsset>102220</MuzzleEffectAsset>
            </Item>
            <Item>
              <VectorElement>
                <InheritedIndex>0</InheritedIndex>
                <InheritanceMapV2>
                  <Entry>
                    <TemplateName>WarShip</TemplateName>
                    <Index>0</Index>
                  </Entry>
                </InheritanceMapV2>
              </VectorElement>
              <MuzzleEffectAsset>102228</MuzzleEffectAsset>
            </Item>
          </MuzzleEffectAssets>
          <AccuracyByDistance>
            <Item>
              <VectorElement>
                <InheritedIndex>0</InheritedIndex>
                <InheritanceMapV2>
                  <Entry>
                    <TemplateName>WarShip</TemplateName>
                    <Index>0</Index>
                  </Entry>
                </InheritanceMapV2>
              </VectorElement>
              <AccuracyByDistancePair>
                <CorrespondingAccuracy>5</CorrespondingAccuracy>
              </AccuracyByDistancePair>
            </Item>
            <Item>
              <VectorElement>
                <InheritedIndex>1</InheritedIndex>
                <InheritanceMapV2>
                  <Entry>
                    <TemplateName>WarShip</TemplateName>
                    <Index>1</Index>
                  </Entry>
                </InheritanceMapV2>
              </VectorElement>
              <AccuracyByDistancePair>
                <EnemyDistanceRelToAttackRange>40</EnemyDistanceRelToAttackRange>
                <CorrespondingAccuracy>5</CorrespondingAccuracy>
              </AccuracyByDistancePair>
            </Item>
            <Item>
              <AccuracyByDistancePair>
                <EnemyDistanceRelToAttackRange>55</EnemyDistanceRelToAttackRange>
                <CorrespondingAccuracy>20</CorrespondingAccuracy>
              </AccuracyByDistancePair>
            </Item>
            <Item>
              <AccuracyByDistancePair>
                <EnemyDistanceRelToAttackRange>70</EnemyDistanceRelToAttackRange>
                <CorrespondingAccuracy>25</CorrespondingAccuracy>
              </AccuracyByDistancePair>
            </Item>
            <Item>
              <AccuracyByDistancePair>
                <EnemyDistanceRelToAttackRange>100</EnemyDistanceRelToAttackRange>
                <CorrespondingAccuracy>30</CorrespondingAccuracy>
              </AccuracyByDistancePair>
            </Item>
          </AccuracyByDistance>
        </Attacker>
        <MinimapToken>
          <TokenAsset>2001947</TokenAsset>
          <StrategicMapAsset>501018</StrategicMapAsset>
        </MinimapToken>
        <SoundEmitter>
          <ActiveSounds>
            <Item>
              <Sound>201827</Sound>
            </Item>
          </ActiveSounds>
          <DestroySounds>
            <Item>
              <Sound>238314</Sound>
            </Item>
          </DestroySounds>
        </SoundEmitter>
        <UpgradeList />
        <QuestObject />
        <Infolayer />
        <ItemContainer>
          <SocketCount>3</SocketCount>
          <SocketAllocation>Ship;SteamShip;Tradeship;Warship</SocketAllocation>
          <SlotCount>5</SlotCount>
        </ItemContainer>
        <FeedbackController />
        <Draggable>
          <DraggableOnDrag>
            <IsBaseAutoCreateAsset>1</IsBaseAutoCreateAsset>
            <Values>
              <ActionList />
            </Values>
          </DraggableOnDrag>
          <DraggableOnDrop>
            <IsBaseAutoCreateAsset>1</IsBaseAutoCreateAsset>
            <Values>
              <ActionList />
            </Values>
          </DraggableOnDrop>
        </Draggable>
        <Cost>
          <Costs>
            <Item>
              <Ingredient>1010218</Ingredient>
              <Amount>60</Amount>
            </Item>
            <Item>
              <Ingredient>1010224</Ingredient>
              <Amount>10</Amount>
            </Item>
            <Item>
              <Ingredient>1010223</Ingredient>
              <Amount>10</Amount>
            </Item>
          </Costs>
          <InfluenceCostPoints>0</InfluenceCostPoints>
        </Cost>
        <Craftable>
          <CraftingTime>2700000</CraftingTime>
        </Craftable>
        <TradeRouteVehicle />
        <Locked />
        <Nameable />
        <MetaPersistent />
        <ExpeditionAttribute>
          <BaseMorale>50</BaseMorale>
          <ExpeditionAttributes>
            <Item>
              <Attribute>Might</Attribute>
              <Amount>25</Amount>
            </Item>
            <Item>
              <Attribute>Navigation</Attribute>
              <Amount>20</Amount>
            </Item>
            <Item>
              <Attribute>PerkTradeShip</Attribute>
              <Amount>1</Amount>
            </Item>
            <Item>
              <Attribute>PerkSteamShip</Attribute>
              <Amount>1</Amount>
            </Item>
            <Item>
              <Attribute>PerkMilitaryShip</Attribute>
              <Amount>1</Amount>
            </Item>
          </ExpeditionAttributes>
        </ExpeditionAttribute>
        <ShipMaintenance>
          <Maintenance>100</Maintenance>
        </ShipMaintenance>
        <Sellable>
          <Baseprice>
            <Item>
              <Amount>50000</Amount>
              <Resource>1010017</Resource>
            </Item>
          </Baseprice>
          <CanBeSoldToTrader>0</CanBeSoldToTrader>
        </Sellable>
        <Stance />
        <Rentable />
        <WorldMapSound />
        <Pausable />
        <ShipIncident />
        <SoundEmitterCommandBarks>
          <BarkMapping>
            <Selection>
              <AudioPool>700084</AudioPool>
            </Selection>
            <AttackCommand>
              <AudioPool>700085</AudioPool>
            </AttackCommand>
            <MoveCommand>
              <AudioPool>1500003501</AudioPool>
            </MoveCommand>
            <SelectionDamaged>
              <AudioPool>700113</AudioPool>
            </SelectionDamaged>
            <EscortCommand>
              <AudioPool>700115</AudioPool>
            </EscortCommand>
            <PatrolCommand>
              <AudioPool>700114</AudioPool>
            </PatrolCommand>
          </BarkMapping>
        </SoundEmitterCommandBarks>
      </Values>
    </Asset>

  </ModOp>
  
  
  <!-- make the vanilla Great Eastern a normal, not unique ships (which is is not anyways since you can research more permits and build it in shipyard yourself) -->
   <!-- This way archibald only offers replacement for our new steam flagship -->
  <ModOp Type="remove" GUID='118718' Path="/Values/CommandQueue/ShipUniqueType" />
  
  <!-- same as flagship, but without "Sails!" sound -->
  <ModOp GUID="700086" Type="AddNextSibling">
    <Asset>
      <Template>TextPool</Template>
      <Values>
        <Standard>
          <GUID>1500003501</GUID>
          <Name>SteamFlagship_MovePool</Name>
        </Standard>
        <AudioTextPool>
          <AudioTextList>
            <Item>
              <AudioText>268466</AudioText>
            </Item>
            <Item>
              <AudioText>268467</AudioText>
            </Item>
            <Item>
              <AudioText>268468</AudioText>
            </Item>
            <Item>
              <AudioText>268469</AudioText>
            </Item>
          </AudioTextList>
        </AudioTextPool>
      </Values>
    </Asset>
  </ModOp>
  
  <!-- add to every pool it is not in yet, but the flagship/great eastern is (except sailship pools) -->
  <ModOp Type="add" GUID="191454,193982,191458,193986,191456,1404" Path="/Values/ItemEffectTargetPool/EffectTargetGUIDs">
    <Item>
      <GUID>1500003500</GUID>
    </Item>
  </ModOp>
  <ModOp Type="add" GUID="700151,270174" Path="/Values/AssetPool/AssetList">
    <Item>
      <Asset>1500003500</Asset>
    </Item>
  </ModOp>
  <ModOp Type="add" GUID="700155,119965,105827" Path="/Values/PlayerCounterContextPool/Contexts">
    <Item>
      <Asset>1500003500</Asset>
    </Item>
  </ModOp>
  
  <!-- ############################################################# -->
  
  <!-- change archibald text to flagship offer instead of great eastern offer when offering replacement -->
  <!-- (cant simply copy "FlagshipReplacementOffered" in here, because the content of it is just wrong, the game uses hardcoded stuff from outside the xml for flagship -.-) -->
  <ModOp Type="replace" GUID="45" Path="/Values/ParticipantMessages/MessageTriggers/GreatEasternReplacementOffered/Reactions/Item[1]">
    <Item>
      <MyRole>ObserverToInitiator</MyRole>
      <Notification>
        <Template>CharacterNotification</Template>
        <Values>
          <CharacterNotification />
          <BaseNotification>
            <NotificationText>12076</NotificationText>
          </BaseNotification>
          <NotificationSubtitle>
            <Subtitle>256682</Subtitle>
          </NotificationSubtitle>
        </Values>
      </Notification>
    </Item>
  </ModOp>
  
  <!-- add it to warfleet of the AI, otherwise the are not using it. -->
   <!-- (they use tradeships without them being added anywhere, but it seems as soon as an ship has attacker, they refuse to use it for trading/island settling) -->
  <ModOp Type="add" Path="//Asset[BaseAssetGUID='168' or BaseAssetGUID='169' or BaseAssetGUID='170']/Values/MilitaryAI/WarFleet/ShipList">
    <Item>
      <Type>1500003500</Type>
      <Weight>1</Weight>
    </Item>
  </ModOp>
  <!-- todo test 1010520 -->
  <ModOp Type="add" GUID="1010521" Path="/Values/Shipyard/AssemblyOptions">
    <Item>
      <Vehicle>1500003500</Vehicle>
    </Item>
   </ModOp>
  
  <Include File="./TriggerQuests.include.xml" />
  <Include File="./TriggerQuestsGreatEastern.include.xml" />


  

</ModOps>

