<ModOps>
  
  <!-- Serp GUIDs 1500003815 to 1500003818 reserved for this mod -->
  <!-- 1500003815 is free but was a Trigger, so dont use for another trigger or also not questpool -->
  <!-- and used 1500006074+1500006075 -->
  
  <!-- And from 1500006076 to including 1500006094 for unlocks for different participants (to also show cargo of ships if not allied, support for diplo/sabotage mod) -->
  <!-- this is in sabotage mod -->
  
  <!-- for unhiding everything I made a seperate mod called UnhideAllShipsandBuildings_Serp -->

  

  <!-- we add an invalid war flag to all Attackable buildings, to make the UI show the hitpoints (somewhere hardcoded to not show it if it is 0) -->
  <!-- residence GUIDType still does not show it.. but most others -->
  <ModOp Type="merge" Path="//Values/Attackable[(AttackableType='HarbourBuilding' or AttackableType='IslandBuilding') and not(IslandWarFlag)]">              
    <IslandWarFlag>12</IslandWarFlag>
  </ModOp>
  
  <!-- ################################################################################################## -->
  
  <ModOp Type="add" GUID='2001271' Path="/Values/GUIConfig/KeyBindings">
    <Item>
      <KeyTypes>Control;I</KeyTypes>
      <Command>ts.Conditions.RegisterTriggerForCurrentParticipant(1500006074)</Command>
      <Active>Session;WorldMap;Menu;Pause;Popup</Active>
      <AvailableOnPlatforms>PC;Xbox;PS;Stadia</AvailableOnPlatforms>
      <AudioEvent>200634</AudioEvent>
      <Configurable>0</Configurable>
      <HideInOptionMenu>1</HideInOptionMenu>
      <AllowMultipleShortcuts>1</AllowMultipleShortcuts>
      <Identifier>toggleinfolayerinfotip_serp</Identifier>
    </Item>
  </ModOp>
  
  <ModOp Type="addNextSibling" GUID="130248">
    <Asset>
      <Template>FeatureUnlock</Template>
      <Values>
        <Standard>
          <GUID>1500006074</GUID>
          <Name>Enable/Disable Hover infolayer infotip Quest (shown while locked, because non existend guids are unlocked)</Name>
        </Standard>
        <Locked>
          <DefaultLockedState>1</DefaultLockedState>
        </Locked>
        <Trigger>
          <TriggerCondition>
            <IsBaseAutoCreateAsset>1</IsBaseAutoCreateAsset>
            <Values>
              <Condition>
                <SubConditionCompletionOrder>MutuallyExclusive</SubConditionCompletionOrder>
              </Condition>
              <ConditionAlwaysTrue />
            </Values>
          </TriggerCondition>
          <SubTriggers>
            <Item>
              <SubTrigger>
                <Template>AutoCreateTrigger</Template>
                <Values>
                  <Trigger>
                    <TriggerCondition>
                      <Template>ConditionUnlocked</Template>
                      <Values>
                        <Condition />
                        <ConditionUnlocked>
                          <UnlockNeeded>1500006074</UnlockNeeded>
                        </ConditionUnlocked>
                        <ConditionPropsNegatable>
                          <NegateCondition>1</NegateCondition>
                        </ConditionPropsNegatable>
                      </Values>
                    </TriggerCondition>
                    <TriggerActions>
                      <Item>
                        <TriggerAction>
                          <Template>ActionUnlockAsset</Template>
                          <Values>
                            <Action />
                            <ActionUnlockAsset>
                              <UnlockAssets>
                                <Item>
                                  <Asset>1500006074</Asset>
                                </Item>
                              </UnlockAssets>
                              <UnhideAssets />
                            </ActionUnlockAsset>
                          </Values>
                        </TriggerAction>
                      </Item>
                      <!-- KeepCheckingPreconditionsWhenRunning also aborts the quest, but ActionEndQuest is needed for compatibility to previous mod version anyways -->
                      <Item>
                        <TriggerAction>
                          <Template>ActionEndQuest</Template>
                          <Values>
                            <Action />
                            <ActionEndQuest>
                              <Quest>1500003817</Quest>
                              <AbortQuestExceptionally>1</AbortQuestExceptionally>
                            </ActionEndQuest>
                          </Values>
                        </TriggerAction>
                      </Item>
                    </TriggerActions>
                  </Trigger>
                </Values>
              </SubTrigger>
            </Item>
            <Item>
              <SubTrigger>
                <Template>AutoCreateTrigger</Template>
                <Values>
                  <Trigger>
                    <TriggerCondition>
                      <Template>ConditionUnlocked</Template>
                      <Values>
                        <Condition />
                        <ConditionUnlocked>
                          <UnlockNeeded>1500006074</UnlockNeeded>
                        </ConditionUnlocked>
                        <ConditionPropsNegatable />
                      </Values>
                    </TriggerCondition>
                    <TriggerActions>
                      <Item>
                        <TriggerAction>
                          <Template>ActionLockAsset</Template>
                          <Values>
                            <Action />
                            <ActionLockAsset>
                              <LockAssets>
                                <Item>
                                  <Asset>1500006074</Asset>
                                </Item>
                              </LockAssets>
                            </ActionLockAsset>
                          </Values>
                        </TriggerAction>
                      </Item>
                    </TriggerActions>
                  </Trigger>
                </Values>
              </SubTrigger>
            </Item>
          </SubTriggers>
        </Trigger>
        <TriggerSetup>
          <AutoRegisterTrigger>0</AutoRegisterTrigger>
          <UsedBySecondParties>0</UsedBySecondParties>
          <AutoSelfUnlock>0</AutoSelfUnlock>
        </TriggerSetup>
      </Values>
    </Asset>
  </ModOp>
    
  <ModOp Type="addNextSibling" GUID="150725">
    <Asset>
      <Template>QuestPool</Template>
      <Values>
        <Standard>
          <GUID>1500006075</GUID>
          <Name>start infolayer quest</Name>
        </Standard>
        <QuestPool>
          <Quests>
            <Item>
              <Quest>1500003817</Quest>
            </Item>
          </Quests>
          <PoolCooldown>1000</PoolCooldown>
          <QuestCooldown>0</QuestCooldown>
          <CooldownOnQuestStart>1</CooldownOnQuestStart>
          <CooldownOnQuestEnd>0</CooldownOnQuestEnd>
          <AffectedByCooldownFactor>0</AffectedByCooldownFactor>
          <IsMainStoryPool>0</IsMainStoryPool>
          <IsTopLevel>1</IsTopLevel>
          <QuestLimit>1</QuestLimit>
        </QuestPool>
        <Locked>
          <DefaultLockedState>0</DefaultLockedState>
        </Locked>
        <PreConditionList>
          <Condition>
            <Template>ConditionUnlocked</Template>
            <Values>
              <Condition />
              <ConditionUnlocked>
                <UnlockNeeded>1500006074</UnlockNeeded>
              </ConditionUnlocked>
              <ConditionPropsNegatable>
                <NegateCondition>1</NegateCondition>
              </ConditionPropsNegatable>
            </Values>
          </Condition>
        </PreConditionList>
      </Values>
    </Asset>
  </ModOp>
  
  <!-- setting IsQuestInfolayer=1 to also have it when user turned infolayers off -->
  <ModOp Type="addNextSibling" GUID="2002086">
    <Asset>
      <Template>InfoLayerIcon</Template>
      <Values>
        <Standard>
          <GUID>1500003816</GUID>
          <Name>Invisible Low Priority Tooltip Infolayer</Name>
          <IconFilename>data/ui/2kimages/main/3dicons/icon_soap_2.png</IconFilename>
        </Standard>
        <InfoLayerIcon>
          <PopupDelay>0</PopupDelay>
          <InfoLayerInfotip>1500003817</InfoLayerInfotip>
          <IsQuestInfolayer>1</IsQuestInfolayer>
          <ShowInCreativeMode>1</ShowInCreativeMode>
        </InfoLayerIcon>
      </Values>
    </Asset>
  </ModOp>
  <!-- add it to the end of priority list, so all other infolayers have higher priority -->
  <ModOp Type="add" GUID="140695" Path="/Values/InfolayerConfig/InfoLayerPriority">
    <Item>
      <Icon>1500003816</Icon>
    </Item>
  </ModOp>
  <!-- add the infotip also to some vanilla infolayers -->
    <!-- No way to get the Infolayer Name in Infotip ... -->
     <!-- so make on infotip per Infolayer... for now only piratemode -->
  <ModOp Type="merge" GUID="500937" Path="/Values/InfoLayerIcon">
    <InfoLayerInfotip>1500003818</InfoLayerInfotip>
  </ModOp>
  
  <ModOp Type="AddNextSibling" GUID="193986">
    <Asset>
      <Template>ItemEffectTargetPool</Template>
      <Values>
        <Standard>
          <GUID>1500003818</GUID>
          <Name>all military units and buildings , all ships for combat effects, all kontors</Name>
          <IconFilename>data/ui/2kimages/main/icons/icon_threat_melee_tint.png</IconFilename>
        </Standard>
        <Text>
          <TextOverride>193986</TextOverride>
        </Text>
        <ItemEffectTargetPool>
          <EffectTargetGUIDs>
            <Item>
              <GUID>193986</GUID>
            </Item>
            <Item>
              <GUID>1512</GUID>
            </Item>
            <Item>
              <GUID>190797</GUID>
            </Item>
          </EffectTargetGUIDs>
        </ItemEffectTargetPool>
      </Values>
    </Asset>
  </ModOp>
  
  

  
  <!-- Distribute the Infolayer via Quest, because this is the only way to also show it for foreign ships -->
  <!-- neu gebaute Schiffe haben es nicht, deswegen müssen wir es regelmäßig aktualisieren... -->
   <!-- to reduce the amount of started Quests, we copy paste alot of SustainObjective_ShowStatsSerp (10 seconds) winconditions into it. -->
    <!-- and after they are done, restart the Quest -->
    <!-- but adding to many SustainObjective_ShowStatsSerp makes the game lag quite hard on big savegames when the quest is started/ended -->
     <!-- it does not lag with less SustainObjective_ShowStatsSerp (and also not on small savegames) -->
      <!-- and it does not lag even on big savegames with just 1 SustainObjective_ShowStatsSerp -->
  <ModOp Type="AddNextSibling" GUID="152264">
    <Asset>
      <Template>A7_QuestDummyQuest</Template>
      <Values>
        <Standard>
          <GUID>1500003817</GUID>
          <Name>Show invisible infolayer with tooltip on every ship</Name>
        </Standard>
        <Quest>
          <KeepCheckingPreconditionsWhenRunning>1</KeepCheckingPreconditionsWhenRunning>
        </Quest>
        <PreConditionList>
          <Condition>
            <Template>ConditionUnlocked</Template>
            <Values>
              <Condition />
              <ConditionUnlocked>
                <UnlockNeeded>1500006074</UnlockNeeded>
              </ConditionUnlocked>
              <ConditionPropsNegatable>
                <NegateCondition>1</NegateCondition>
              </ConditionPropsNegatable>
            </Values>
          </Condition>
        </PreConditionList>
        <Locked>
          <DefaultLockedState>0</DefaultLockedState>
        </Locked>
        <Objectives>
          <WinConditionCompletionOrder>Linear</WinConditionCompletionOrder>
          <WinConditions>
            <Item>
              <Objective>
                <Template>SustainObjective_ShowStatsSerp</Template>
                <Values />
              </Objective>
            </Item>
            <Item>
              <Objective>
                <Template>SustainObjective_ShowStatsSerp</Template>
                <Values />
              </Objective>
            </Item>
            <Item>
              <Objective>
                <Template>SustainObjective_ShowStatsSerp</Template>
                <Values />
              </Objective>
            </Item>
            <Item>
              <Objective>
                <Template>SustainObjective_ShowStatsSerp</Template>
                <Values />
              </Objective>
            </Item>
            <Item>
              <Objective>
                <Template>SustainObjective_ShowStatsSerp</Template>
                <Values />
              </Objective>
            </Item>
            <Item>
              <Objective>
                <Template>SustainObjective_ShowStatsSerp</Template>
                <Values />
              </Objective>
            </Item>
            <Item>
              <Objective>
                <Template>SustainObjective_ShowStatsSerp</Template>
                <Values />
              </Objective>
            </Item>
            <Item>
              <Objective>
                <Template>SustainObjective_ShowStatsSerp</Template>
                <Values />
              </Objective>
            </Item>
            <Item>
              <Objective>
                <Template>SustainObjective_ShowStatsSerp</Template>
                <Values />
              </Objective>
            </Item>
            <Item>
              <Objective>
                <Template>SustainObjective_ShowStatsSerp</Template>
                <Values />
              </Objective>
            </Item>
            <Item>
              <Objective>
                <Template>SustainObjective_ShowStatsSerp</Template>
                <Values />
              </Objective>
            </Item>
            <Item>
              <Objective>
                <Template>SustainObjective_ShowStatsSerp</Template>
                <Values />
              </Objective>
            </Item>
            <Item>
              <Objective>
                <Template>SustainObjective_ShowStatsSerp</Template>
                <Values />
              </Objective>
            </Item>
            <Item>
              <Objective>
                <Template>SustainObjective_ShowStatsSerp</Template>
                <Values />
              </Objective>
            </Item>
            <Item>
              <Objective>
                <Template>SustainObjective_ShowStatsSerp</Template>
                <Values />
              </Objective>
            </Item>
            <Item>
              <Objective>
                <Template>SustainObjective_ShowStatsSerp</Template>
                <Values />
              </Objective>
            </Item>
            <Item>
              <Objective>
                <Template>SustainObjective_ShowStatsSerp</Template>
                <Values />
              </Objective>
            </Item>
            <Item>
              <Objective>
                <Template>SustainObjective_ShowStatsSerp</Template>
                <Values />
              </Objective>
            </Item>
            <Item>
              <Objective>
                <Template>SustainObjective_ShowStatsSerp</Template>
                <Values />
              </Objective>
            </Item>
            <Item>
              <Objective>
                <Template>SustainObjective_ShowStatsSerp</Template>
                <Values />
              </Objective>
            </Item>
            <Item>
              <Objective>
                <Template>SustainObjective_ShowStatsSerp</Template>
                <Values />
              </Objective>
            </Item>
            <Item>
              <Objective>
                <Template>SustainObjective_ShowStatsSerp</Template>
                <Values />
              </Objective>
            </Item>
            <Item>
              <Objective>
                <Template>SustainObjective_ShowStatsSerp</Template>
                <Values />
              </Objective>
            </Item>
            <Item>
              <Objective>
                <Template>SustainObjective_ShowStatsSerp</Template>
                <Values />
              </Objective>
            </Item>
            <Item>
              <Objective>
                <Template>SustainObjective_ShowStatsSerp</Template>
                <Values />
              </Objective>
            </Item>
            <Item>
              <Objective>
                <Template>SustainObjective_ShowStatsSerp</Template>
                <Values />
              </Objective>
            </Item>
            <Item>
              <Objective>
                <Template>SustainObjective_ShowStatsSerp</Template>
                <Values />
              </Objective>
            </Item>
            <Item>
              <Objective>
                <Template>SustainObjective_ShowStatsSerp</Template>
                <Values />
              </Objective>
            </Item>
            <Item>
              <Objective>
                <Template>SustainObjective_ShowStatsSerp</Template>
                <Values />
              </Objective>
            </Item>
            <Item>
              <Objective>
                <Template>SustainObjective_ShowStatsSerp</Template>
                <Values />
              </Objective>
            </Item>
            <Item>
              <Objective>
                <Template>SustainObjective_ShowStatsSerp</Template>
                <Values />
              </Objective>
            </Item>
            <Item>
              <Objective>
                <Template>SustainObjective_ShowStatsSerp</Template>
                <Values />
              </Objective>
            </Item>
            <Item>
              <Objective>
                <Template>SustainObjective_ShowStatsSerp</Template>
                <Values />
              </Objective>
            </Item>
            <Item>
              <Objective>
                <Template>SustainObjective_ShowStatsSerp</Template>
                <Values />
              </Objective>
            </Item>
            <Item>
              <Objective>
                <Template>SustainObjective_ShowStatsSerp</Template>
                <Values />
              </Objective>
            </Item>
            <Item>
              <Objective>
                <Template>SustainObjective_ShowStatsSerp</Template>
                <Values />
              </Objective>
            </Item>
            <Item>
              <Objective>
                <Template>SustainObjective_ShowStatsSerp</Template>
                <Values />
              </Objective>
            </Item>
            <Item>
              <Objective>
                <Template>SustainObjective_ShowStatsSerp</Template>
                <Values />
              </Objective>
            </Item>
            <Item>
              <Objective>
                <Template>SustainObjective_ShowStatsSerp</Template>
                <Values />
              </Objective>
            </Item>
            <Item>
              <Objective>
                <Template>SustainObjective_ShowStatsSerp</Template>
                <Values />
              </Objective>
            </Item>
            <Item>
              <Objective>
                <Template>SustainObjective_ShowStatsSerp</Template>
                <Values />
              </Objective>
            </Item>
            <Item>
              <Objective>
                <Template>SustainObjective_ShowStatsSerp</Template>
                <Values />
              </Objective>
            </Item>
            <Item>
              <Objective>
                <Template>SustainObjective_ShowStatsSerp</Template>
                <Values />
              </Objective>
            </Item>
            <Item>
              <Objective>
                <Template>SustainObjective_ShowStatsSerp</Template>
                <Values />
              </Objective>
            </Item>
            <Item>
              <Objective>
                <Template>SustainObjective_ShowStatsSerp</Template>
                <Values />
              </Objective>
            </Item>
            <Item>
              <Objective>
                <Template>SustainObjective_ShowStatsSerp</Template>
                <Values />
              </Objective>
            </Item>
            <Item>
              <Objective>
                <Template>SustainObjective_ShowStatsSerp</Template>
                <Values />
              </Objective>
            </Item>
            <Item>
              <Objective>
                <Template>SustainObjective_ShowStatsSerp</Template>
                <Values />
              </Objective>
            </Item>
            <Item>
              <Objective>
                <Template>SustainObjective_ShowStatsSerp</Template>
                <Values />
              </Objective>
            </Item>
            <Item>
              <Objective>
                <Template>SustainObjective_ShowStatsSerp</Template>
                <Values />
              </Objective>
            </Item>
            <Item>
              <Objective>
                <Template>SustainObjective_ShowStatsSerp</Template>
                <Values />
              </Objective>
            </Item>
            <Item>
              <Objective>
                <Template>SustainObjective_ShowStatsSerp</Template>
                <Values />
              </Objective>
            </Item>
            <Item>
              <Objective>
                <Template>SustainObjective_ShowStatsSerp</Template>
                <Values />
              </Objective>
            </Item>
            <Item>
              <Objective>
                <Template>SustainObjective_ShowStatsSerp</Template>
                <Values />
              </Objective>
            </Item>
            <Item>
              <Objective>
                <Template>SustainObjective_ShowStatsSerp</Template>
                <Values />
              </Objective>
            </Item>
            <Item>
              <Objective>
                <Template>SustainObjective_ShowStatsSerp</Template>
                <Values />
              </Objective>
            </Item>
            <Item>
              <Objective>
                <Template>SustainObjective_ShowStatsSerp</Template>
                <Values />
              </Objective>
            </Item>
            <Item>
              <Objective>
                <Template>SustainObjective_ShowStatsSerp</Template>
                <Values />
              </Objective>
            </Item>
            <Item>
              <Objective>
                <Template>SustainObjective_ShowStatsSerp</Template>
                <Values />
              </Objective>
            </Item>
            <Item>
              <Objective>
                <Template>SustainObjective_ShowStatsSerp</Template>
                <Values />
              </Objective>
            </Item>
          </WinConditions>
        </Objectives>
      </Values>
    </Asset>
  </ModOp>
  
  <!-- ############################################################################################## -->
  
  <!-- Alternatives to add the Infolayer which did not work good enough -->
  <!-- Only displayed for own units this way... so using dmmy quest instead -->
  <!-- <ModOp Type="merge" Path="//Values[Walking]/Infolayer[not(DefaultInfoLayer)]"> -->
    <!-- <DefaultInfoLayer>1500003816</DefaultInfoLayer> -->
  <!-- </ModOp> -->
  
 
  
  
  <!-- ######################################### -->
  
  <!-- add MetaBuffHandler to merchants, so they can receive global buffs -->
  <!-- <ModOp Type="merge" GUID='44,45,46,77,78,76,73,29,237,119051' Path="/Values"> -->
    <!-- <MetaBuffHandler /> -->
  <!-- </ModOp> -->
  <!-- wtf. auch davon sind neue schiffe nicht betroffen?!!? -->
   <!-- ok neue schiffe haben den Buff, aber nicht das Infolayer.. -->
    <!-- und KI Schiffe zeigen ihr Infolayer eh nicht an, also Buff auch keine Lösung.. -->
  <!-- <ModOp Type="AddPrevSibling" GUID="190605"> -->
    <!-- <Asset> -->
      <!-- <Template>InfluenceTitleBuff</Template> -->
      <!-- <Values> -->
        <!-- <Standard> -->
          <!-- <GUID>1500003817</GUID> -->
          <!-- <Name>Display Ship Stats with Infolayer</Name> -->
        <!-- </Standard> -->
        <!-- <ItemEffect> -->
          <!-- <EffectTargets> -->
            <!-- <Item> -->
              <!-- <GUID>1512</GUID> -->
            <!-- </Item> -->
          <!-- </EffectTargets> -->
          <!-- <AllowStacking>0</AllowStacking> -->
        <!-- </ItemEffect> -->
        <!-- <Buff> -->
          <!-- <ShouldBeShownInForeignObjectMenu>1</ShouldBeShownInForeignObjectMenu> -->
          <!-- <AddedInfolayer>1500003816</AddedInfolayer> -->
        <!-- </Buff> -->
        <!-- <CultureUpgrade> -->
          <!-- <HideBuff>1</HideBuff> -->
        <!-- </CultureUpgrade> -->
      <!-- </Values> -->
    <!-- </Asset> -->
  <!-- </ModOp> -->
  <!-- renew buff on first sessionenter per savegame -->
  <!-- <ModOp Type="add" GUID="1500004530" Path="Values/Trigger/ResetTrigger/Values/Trigger/TriggerActions"> -->
    <!-- <Item> -->
      <!-- <TriggerAction> -->
        <!-- <Template>ActionBuff</Template> -->
        <!-- <Values> -->
          <!-- <Action /> -->
          <!-- <ActionBuff> -->
            <!-- <BuffAsset>1500003817</BuffAsset> -->
            <!-- <AddBuff>0</AddBuff> -->
          <!-- </ActionBuff> -->
        <!-- </Values> -->
      <!-- </TriggerAction> -->
    <!-- </Item> -->
    <!-- <Item> -->
      <!-- <TriggerAction> -->
        <!-- <Template>ActionBuff</Template> -->
        <!-- <Values> -->
          <!-- <Action /> -->
          <!-- <ActionBuff> -->
            <!-- <BuffAsset>1500003817</BuffAsset> -->
            <!-- <AddBuff>1</AddBuff> -->
          <!-- </ActionBuff> -->
        <!-- </Values> -->
      <!-- </TriggerAction> -->
    <!-- </Item> -->
  <!-- </ModOp> -->
  
  
</ModOps>