<ModOps>

  <!-- ############################################### -->
  <!-- ###### LeaveUIState -->
  <!-- ############################################### -->
  
  <!-- EnterUIState klappt vermutlich so, soferns durch forcenewspaper oder auch ItemWithUI usw kommt, weil das bei allen clients ausgelöst wird -->
  <!-- LeaveUIState: move the trigger registering that checks for leaveui directly next to the action that opens the UI and then use ConditionTimer -->
  
  <!-- LeaveUIState 113398 SL111_CrackingTheCode -->
  <!-- use an unlock with ItemWithUI 112241, so it causes no harm if it is clicked multiple times and do not remove the vanilla register of trigger in this case -->
  <ModOp Type="add" GUID='112241' Path="/Values/ItemWithUI/ItemActions/Values/ActionList/Actions">
    <Item>
      <Action>
        <Template>ActionDelayedActions</Template>
        <Values>
          <Action />
          <ActionDelayedActions>
            <ExecutionDelay>15000</ExecutionDelay>
            <DelayedActions>
              <IsBaseAutoCreateAsset>1</IsBaseAutoCreateAsset>
              <Values>
                <ActionList>
                  <Actions>
                    <Item>
                      <Action>
                        <Template>ActionUnlockAsset</Template>
                        <Values>
                          <Action />
                          <ActionUnlockAsset>
                            <UnlockAssets>
                              <Item>
                                <Asset>1500004365</Asset>
                              </Item>
                            </UnlockAssets>
                          </ActionUnlockAsset>
                        </Values>
                      </Action>
                    </Item>
                  </Actions>
                </ActionList>
              </Values>
            </DelayedActions>
          </ActionDelayedActions>
        </Values>
      </Action>
    </Item>
  </ModOp>
  <ModOp Type="replace" GUID='113398' Path="/Values/Trigger/TriggerCondition[Values/ConditionEvent[ContextData='TextPopup' and ConditionEvent='LeaveUIState']]">
    <TriggerCondition>
      <Template>ConditionUnlocked</Template>
      <Values>
        <Condition />
        <ConditionUnlocked>
          <UnlockNeeded>1500004365</UnlockNeeded>
        </ConditionUnlocked>
        <ConditionPropsNegatable />
      </Values>
    </TriggerCondition>
  </ModOp>
  
  <!-- LeaveUIState 113456 SL112_NewPages Trigger and ItemWithUI 112242 -->
  <ModOp Type="add" GUID='112242' Path="/Values/ItemWithUI/ItemActions/Values/ActionList/Actions">
    <Item>
      <Action>
        <Template>ActionDelayedActions</Template>
        <Values>
          <Action />
          <ActionDelayedActions>
            <ExecutionDelay>15000</ExecutionDelay>
            <DelayedActions>
              <IsBaseAutoCreateAsset>1</IsBaseAutoCreateAsset>
              <Values>
                <ActionList>
                  <Actions>
                    <Item>
                      <Action>
                        <Template>ActionUnlockAsset</Template>
                        <Values>
                          <Action />
                          <ActionUnlockAsset>
                            <UnlockAssets>
                              <Item>
                                <Asset>1500004366</Asset>
                              </Item>
                            </UnlockAssets>
                          </ActionUnlockAsset>
                        </Values>
                      </Action>
                    </Item>
                  </Actions>
                </ActionList>
              </Values>
            </DelayedActions>
          </ActionDelayedActions>
        </Values>
      </Action>
    </Item>
  </ModOp>
  <ModOp Type="replace" GUID='113456' Path="/Values/Trigger/TriggerCondition[Values/ConditionEvent[ContextData='TextPopup' and ConditionEvent='LeaveUIState']]">
    <TriggerCondition>
      <Template>ConditionUnlocked</Template>
      <Values>
        <Condition />
        <ConditionUnlocked>
          <UnlockNeeded>1500004366</UnlockNeeded>
        </ConditionUnlocked>
        <ConditionPropsNegatable />
      </Values>
    </TriggerCondition>
  </ModOp>
  
  <!-- LeaveUIState 113320 SL201_NewPages CloseBook Trigger and ItemWithUI 112243 -->
  <ModOp Type="add" GUID='112243' Path="/Values/ItemWithUI/ItemActions/Values/ActionList/Actions">
    <Item>
      <Action>
        <Template>ActionDelayedActions</Template>
        <Values>
          <Action />
          <ActionDelayedActions>
            <ExecutionDelay>15000</ExecutionDelay>
            <DelayedActions>
              <IsBaseAutoCreateAsset>1</IsBaseAutoCreateAsset>
              <Values>
                <ActionList>
                  <Actions>
                    <Item>
                      <Action>
                        <Template>ActionUnlockAsset</Template>
                        <Values>
                          <Action />
                          <ActionUnlockAsset>
                            <UnlockAssets>
                              <Item>
                                <Asset>1500004367</Asset>
                              </Item>
                            </UnlockAssets>
                          </ActionUnlockAsset>
                        </Values>
                      </Action>
                    </Item>
                  </Actions>
                </ActionList>
              </Values>
            </DelayedActions>
          </ActionDelayedActions>
        </Values>
      </Action>
    </Item>
  </ModOp>
  <ModOp Type="replace" GUID='113320' Path="/Values/Trigger/TriggerCondition[Values/ConditionEvent[ContextData='TextPopup' and ConditionEvent='LeaveUIState']]">
    <TriggerCondition>
      <Template>ConditionUnlocked</Template>
      <Values>
        <Condition />
        <ConditionUnlocked>
          <UnlockNeeded>1500004367</UnlockNeeded>
        </ConditionUnlocked>
        <ConditionPropsNegatable />
      </Values>
    </TriggerCondition>
  </ModOp>
  
  <!-- LeaveUIState NewspaperSpecialEdition SL207_ComeAndSee_TriggerNewspaperClose in 113947 -->
   <!-- wird registered in quest 112273 .. zeitung wird geöffnet in 113439 SL207_ComeAndSee_TriggerNewspaper -->
  <ModOp Type="remove" GUID='112273' Path="/Values/Quest/OnQuestActive/Values/ActionList/Actions/Item[Action/Values/ActionRegisterTrigger/TriggerAsset='113947']" />
  <ModOp Type="add" GUID='113439' Path="/Values/Trigger/TriggerActions/Item/TriggerAction/Values/ActionDelayedActions/DelayedActions/Values/ActionList/Actions">
    <Item>
      <Action>
        <Template>ActionRegisterTrigger</Template>
        <Values>
          <Action />
          <ActionRegisterTrigger>
            <TriggerAsset>113947</TriggerAsset>
          </ActionRegisterTrigger>
        </Values>
      </Action>
    </Item>
  </ModOp>
  <ModOp Type="replace" GUID='113947' Path="/Values/Trigger/TriggerCondition[Values/ConditionEvent[ContextData='NewspaperSpecialEdition' and ConditionEvent='LeaveUIState']]">
    <TriggerCondition>
      <Template>ConditionTimer</Template>
      <Values>
        <Condition />
        <ConditionTimer>
          <TimeLimit>10000</TimeLimit>
        </ConditionTimer>
      </Values>
    </TriggerCondition>
  </ModOp>
  
  <!-- 112274 SL208_SymbolOfANation DISABLED is disabled -->
  
  <!-- LeaveUIState NewspaperSpecialEdition Trigger Close IntroNewspaper in 114124 -->
   <!-- wird registered in trigger 114211 , wo auch zeitung geöffnet wird, position ist also schon gut -->
  <ModOp Type="replace" GUID='114124' Path="/Values/Trigger/TriggerCondition[Values/ConditionEvent[ContextData='NewspaperSpecialEdition' and ConditionEvent='LeaveUIState']]">
    <TriggerCondition>
      <Template>ConditionTimer</Template>
      <Values>
        <Condition />
        <ConditionTimer>
          <TimeLimit>10000</TimeLimit>
        </ConditionTimer>
      </Values>
    </TriggerCondition>
  </ModOp>
  
  <!-- LeaveUIState 114420 Trigger SirJohnsLogbook CloseBook and ItemWithUI 114376 -->
  <ModOp Type="add" GUID='114376' Path="/Values/ItemWithUI/ItemActions/Values/ActionList/Actions">
    <Item>
      <Action>
        <Template>ActionDelayedActions</Template>
        <Values>
          <Action />
          <ActionDelayedActions>
            <ExecutionDelay>15000</ExecutionDelay>
            <DelayedActions>
              <IsBaseAutoCreateAsset>1</IsBaseAutoCreateAsset>
              <Values>
                <ActionList>
                  <Actions>
                    <Item>
                      <Action>
                        <Template>ActionUnlockAsset</Template>
                        <Values>
                          <Action />
                          <ActionUnlockAsset>
                            <UnlockAssets>
                              <Item>
                                <Asset>1500004368</Asset>
                              </Item>
                            </UnlockAssets>
                          </ActionUnlockAsset>
                        </Values>
                      </Action>
                    </Item>
                  </Actions>
                </ActionList>
              </Values>
            </DelayedActions>
          </ActionDelayedActions>
        </Values>
      </Action>
    </Item>
  </ModOp>
  <ModOp Type="replace" GUID='114420' Path="/Values/Trigger/TriggerCondition[Values/ConditionEvent[ContextData='TextPopup' and ConditionEvent='LeaveUIState']]">
    <TriggerCondition>
      <Template>ConditionUnlocked</Template>
      <Values>
        <Condition />
        <ConditionUnlocked>
          <UnlockNeeded>1500004368</UnlockNeeded>
        </ConditionUnlocked>
        <ConditionPropsNegatable />
      </Values>
    </TriggerCondition>
  </ModOp>
  
  <!-- LeaveUIState 116707 Trigger Trail CloseNote2 bis CloseNote6, registered in 114177 and ItemWithUI 114605 -->
  <!-- ok interessant.. ItemWithUI 114605 wird mehrfach genutzt und je nach unlocks zeigt es wohl JohnsNotes1 bis JohnsNotes6 an. -->
    <!-- mit LeaveUIState und registern der trigger zum richtigen Zeitpunkt klappt das natürlich, aber mit meinem unlock system geht das so nicht.. -->
    <!-- zeitgleich mit Trigger 116707 wird auch 116910 unlocked, was vermutlich dazu führt dass JohnsNotes1 angezeigt wird -->
     <!-- mit Trigger 116708 wird 116910 und 116911 unlocked ..  mit 116709 wird 116910,116911,116912 unlocked .. mit 116710 wird 116910 bis 116913 unlocked -->
      <!-- und mit 116711 wird 116910 bis 116914 unlocked -->
     <!-- wobei die Trigger 116707 bis 116711 alle LeaveUIState TextPopup als TriggerCondition verwenden -->
     <!-- Idee: bei 116708 packen wir als condition rein, dass 116910 und 116911 unlocked sein müssen und auch 1500004369. -->
         <!-- wobei 1500004369 eben ~15-20 sekunden nach jeder Itemnutzung für 1-2 sekunden lang unlocked ist, danach locken wir es wieder -->
          <!-- für die anderen trigger. Da die trigger jeweils nur einmal feuern, ist das soweit nicht schlimm -->
        <!-- Wobei: da die Trigger immer erst registered werden, wenn auch die 116910 usw unlocked werden, brauchen wir diese garnicht beachten. -->
    <!-- durch ActionDelayedActions kanns theoretisch passieren, dass man Seite1 liest und kurz darauf seite 2 einsammelt und erst dann der erste Timer vorbei ist, sodass ein Kommentar zu Seite 2 gemacht wird, obwohl man die noch nicht gelesen hat. -->
      <!-- aber ist dneke ich nicht so wild und was besseres fällt mir auch nicht ein -->
  <ModOp Type="add" GUID='114605' Path="/Values/ItemWithUI/ItemActions/Values/ActionList/Actions">
    <Item>
      <Action>
        <Template>ActionDelayedActions</Template>
        <Values>
          <Action />
          <ActionDelayedActions>
            <ExecutionDelay>15000</ExecutionDelay>
            <DelayedActions>
              <IsBaseAutoCreateAsset>1</IsBaseAutoCreateAsset>
              <Values>
                <ActionList>
                  <Actions>
                    <Item>
                      <Action>
                        <Template>ActionUnlockAsset</Template>
                        <Values>
                          <Action />
                          <ActionUnlockAsset>
                            <UnlockAssets>
                              <Item>
                                <Asset>1500004369</Asset>
                              </Item>
                            </UnlockAssets>
                          </ActionUnlockAsset>
                        </Values>
                      </Action>
                    </Item>
                    <Item>
                      <Action>
                        <Template>ActionDelayedActions</Template>
                        <Values>
                          <Action />
                          <ActionDelayedActions>
                            <ExecutionDelay>1000</ExecutionDelay>
                            <DelayedActions>
                              <IsBaseAutoCreateAsset>1</IsBaseAutoCreateAsset>
                              <Values>
                                <ActionList>
                                  <Actions>
                                    <Item>
                                    <Action>
                                      <Template>ActionLockAsset</Template>
                                      <Values>
                                        <Action />
                                        <ActionLockAsset>
                                          <LockAssets>
                                            <Item>
                                              <Asset>1500004369</Asset>
                                            </Item>
                                          </LockAssets>
                                        </ActionLockAsset>
                                      </Values>
                                    </Action>
                                  </Item>
                                  </Actions>
                                </ActionList>
                              </Values>
                            </DelayedActions>
                          </ActionDelayedActions>
                        </Values>
                      </Action>
                    </Item>
                  </Actions>
                </ActionList>
              </Values>
            </DelayedActions>
          </ActionDelayedActions>
        </Values>
      </Action>
    </Item>
  </ModOp>
  <ModOp Type="replace" GUID='116707,116708,116709,116710,116711' Path="/Values/Trigger/TriggerCondition[Values/ConditionEvent[ContextData='TextPopup' and ConditionEvent='LeaveUIState']]">
    <TriggerCondition>
      <Template>ConditionUnlocked</Template>
      <Values>
        <Condition />
        <ConditionUnlocked>
          <UnlockNeeded>1500004369</UnlockNeeded>
        </ConditionUnlocked>
        <ConditionPropsNegatable />
      </Values>
    </TriggerCondition>
  </ModOp>
  
  <!-- LeaveUIState NewspaperSpecialEdition Trigger Close OutroNewspaper in 116744 -->
   <!-- wird registered in trigger 115212 , wo auch zeitung geöffnet wird, position ist also schon gut (ist dort aber 5 sekunden delay, also diese 5 sek draufrechnen auf TimeLimit) -->
  <ModOp Type="replace" GUID='116744' Path="/Values/Trigger/TriggerCondition[Values/ConditionEvent[ContextData='NewspaperSpecialEdition' and ConditionEvent='LeaveUIState']]">
    <TriggerCondition>
      <Template>ConditionTimer</Template>
      <Values>
        <Condition />
        <ConditionTimer>
          <TimeLimit>15000</TimeLimit>
        </ConditionTimer>
      </Values>
    </TriggerCondition>
  </ModOp>
  
  <!-- LeaveUIState BrightHarvest Trigger Newspaper SiloClosed in 270018 -->
   <!-- wird registered in trigger 270008 , wo auch zeitung geöffnet wird, position ist also schon gut -->
  <ModOp Type="replace" GUID='270018' Path="/Values/Trigger/SubTriggers/Item/SubTrigger/Values/Trigger/TriggerCondition[Values/ConditionEvent[ContextData='NewspaperSpecialEdition' and ConditionEvent='LeaveUIState']]">
    <TriggerCondition>
      <Template>ConditionTimer</Template>
      <Values>
        <Condition />
        <ConditionTimer>
          <TimeLimit>10000</TimeLimit>
        </ConditionTimer>
      </Values>
    </TriggerCondition>
  </ModOp>
  
  <!-- LeaveUIState BrightHarvest Trigger Newspaper TractorClosed in 270037 -->
   <!-- wird registered in trigger 269865 , wo auch zeitung geöffnet wird, position ist also schon gut -->
  <ModOp Type="replace" GUID='270037' Path="/Values/Trigger/SubTriggers/Item/SubTrigger/Values/Trigger/TriggerCondition[Values/ConditionEvent[ContextData='NewspaperSpecialEdition' and ConditionEvent='LeaveUIState']]">
    <TriggerCondition>
      <Template>ConditionTimer</Template>
      <Values>
        <Condition />
        <ConditionTimer>
          <TimeLimit>10000</TimeLimit>
        </ConditionTimer>
      </Values>
    </TriggerCondition>
  </ModOp>
  
  <!-- LeaveUIState Trigger Close Intro Newspaper in 119866 -->
   <!-- wird registered in trigger 119865, wo auch zeitung geöffnet wird, position ist also schon gut -->
  <ModOp Type="replace" GUID='119866' Path="/Values/Trigger/TriggerCondition[Values/ConditionEvent[ContextData='NewspaperSpecialEdition' and ConditionEvent='LeaveUIState']]">
    <TriggerCondition>
      <Template>ConditionTimer</Template>
      <Values>
        <Condition />
        <ConditionTimer>
          <TimeLimit>10000</TimeLimit>
        </ConditionTimer>
      </Values>
    </TriggerCondition>
  </ModOp>
  
  <!-- LeaveUIState Trigger LoLStory NegotiationRewards in 122987, hat gleich 4 solcher Checks MutuallyExclusive -->
   <!-- wird registered in 119997 was eine decisionquest ist wo man je nach wahl diverse dinge unlocked, welche wiederum auch in 122987 geprüft werden , zeitung wird opened in ...?  -->
   <!-- da LeaveUIState hinter weiteren conditions ist, die nicht immer wahr sind, brauchen wir unlock hilfsobjekt -->
  <!-- TODO: ich finde den ort wo die Zeitung geöffnet wird nicht?! da muss ich ActionDelayedActions mit unlock 1500004370 zufügen.. -->
   <!-- wobei es auch keinen Artikel dazu zu geben scheint, es gibt Article LoLStory_IntroNewspaper und LoLStory_OutroNewspaper , aber keinen dazwischen.. -->
     <!-- aber wenn es da keine zeitung gäbe, dann würde die reward-abhol quest 120546 niemals starten und wäre als bug bekannt, aber hier lese ich nichts von bugs.. https://anno1800.fandom.com/wiki/The_Rise_of_Emperor_Ketema#Full_Disclosure -->
    <!-- und die intro newspaper kommt ganz zu beginn in enbesa, während quest 120546 die vorletzte ist -->
    <!-- ok, offenbar ist tatsächlich die OutroNewspaper gemeint (geöffnet in 123878), hat diese also 2 LeaveUIState Stellen, bzw. insg. 5 -->
  <ModOp Type="replace" GUID='122987' Path="/Values/Trigger/SubTriggers/Item/SubTrigger/Values/Trigger/SubTriggers/Item/SubTrigger/Values/Trigger/TriggerCondition[Values/ConditionEvent[ContextData='NewspaperSpecialEdition' and ConditionEvent='LeaveUIState']]">
    <TriggerCondition>
      <Template>ConditionUnlocked</Template>
      <Values>
        <Condition />
        <ConditionUnlocked>
          <UnlockNeeded>1500004370</UnlockNeeded>
        </ConditionUnlocked>
        <ConditionPropsNegatable />
      </Values>
    </TriggerCondition>
  </ModOp>
  <ModOp Type="add" GUID='123878' Path="/Values/Trigger/TriggerActions/Item/TriggerAction/Values/ActionDelayedActions/DelayedActions/Values/ActionList/Actions">
    <Item>
      <Action>
        <Template>ActionDelayedActions</Template>
        <Values>
          <Action />
          <ActionDelayedActions>
            <ExecutionDelay>15000</ExecutionDelay>
            <DelayedActions>
              <IsBaseAutoCreateAsset>1</IsBaseAutoCreateAsset>
              <Values>
                <ActionList>
                  <Actions>
                    <Item>
                      <Action>
                        <Template>ActionUnlockAsset</Template>
                        <Values>
                          <Action />
                          <ActionUnlockAsset>
                            <UnlockAssets>
                              <Item>
                                <Asset>1500004370</Asset>
                              </Item>
                            </UnlockAssets>
                          </ActionUnlockAsset>
                        </Values>
                      </Action>
                    </Item>
                  </Actions>
                </ActionList>
              </Values>
            </DelayedActions>
          </ActionDelayedActions>
        </Values>
      </Action>
    </Item>
  </ModOp>
  <!-- LeaveUIState Trigger Close OutroNewspaper in 123879 -->
   <!-- wird registered in 123878, wo auch zeitung geöffnet wird, position ist also schon gut, kombinieren mit NegotiationRewards, daher selber UnlockNeeded -->
  <ModOp Type="replace" GUID='123879' Path="/Values/Trigger/TriggerCondition[Values/ConditionEvent[ContextData='NewspaperSpecialEdition' and ConditionEvent='LeaveUIState']]">
    <TriggerCondition>
      <Template>ConditionUnlocked</Template>
      <Values>
        <Condition />
        <ConditionUnlocked>
          <UnlockNeeded>1500004370</UnlockNeeded>
        </ConditionUnlocked>
        <ConditionPropsNegatable />
      </Values>
    </TriggerCondition>
  </ModOp>
  


  <!-- LeaveUIState TextPopup 130843 Trigger Notification close letter registered in 119002, which also does the <ActionTriggerTextPopup>, so already fine this way -->
  <ModOp Type="replace" GUID='130843' Path="/Values/Trigger/TriggerCondition[Values/ConditionEvent[ContextData='TextPopup' and ConditionEvent='LeaveUIState']]">
    <TriggerCondition>
      <Template>ConditionTimer</Template>
      <Values>
        <Condition />
        <ConditionTimer>
          <TimeLimit>15000</TimeLimit>
        </ConditionTimer>
      </Values>
    </TriggerCondition>
  </ModOp>
  
  <!-- LeaveUIState TextPopup 124465 Close Pop Up Diary registered in 127677, which also does the <ActionTriggerTextPopup>, so already fine this way, but add 10 seconds on top, because it also has 10 seconds delay -->
  <ModOp Type="replace" GUID='124465' Path="/Values/Trigger/TriggerCondition[Values/ConditionEvent[ContextData='TextPopup' and ConditionEvent='LeaveUIState']]">
    <TriggerCondition>
      <Template>ConditionTimer</Template>
      <Values>
        <Condition />
        <ConditionTimer>
          <TimeLimit>30000</TimeLimit>
        </ConditionTimer>
      </Values>
    </TriggerCondition>
  </ModOp>
  
  <!-- Trigger 124582 is not used -->
  
  <!-- LeaveUIState TextPopup 124634 Close Pop Up Diary registered in 124619, which also does the <ActionTriggerTextPopup>, so already fine this way -->
   <!-- <PopupText>124623</PopupText> worum es hier geht wird auch in einem ItemWithUI gestartet... -->
      <!-- ist auch der Fall für einige andere zb 124465 ... -->
      <!-- aber ich  denke das item ist nur zum ncohmaligem nachlesen, der trigger wird ja direkt bei ActionTriggerTextPopup registered, also ist er auch für dieses LeaveUIState gedacht, also alles gut. -->
  <ModOp Type="replace" GUID='124634' Path="/Values/Trigger/TriggerCondition[Values/ConditionEvent[ContextData='TextPopup' and ConditionEvent='LeaveUIState']]">
    <TriggerCondition>
      <Template>ConditionTimer</Template>
      <Values>
        <Condition />
        <ConditionTimer>
          <TimeLimit>15000</TimeLimit>
        </ConditionTimer>
      </Values>
    </TriggerCondition>
  </ModOp>
  
  <!-- LeaveUIState TextPopup Close Pop Up Book 128634 sieht kompliziert aus, ich sehe nicht wo ActionTriggerTextPopup gemacht wird..  -->
    <!-- dieser trigger beendet 3 quests -->
   <!-- wird registered in Quest OnQuestSuceeded 128626 -->
    <!-- in dieser quest werden wohl über die winconditions 6 weitere quests getartet (ConditionQuestSubQuest), von denen man eine schaffen muss -->
    <!-- bei diesen quests muss man ein buch objekt selecten, aber die bücher scheinen keinen code zu haben der iein popup öffnet -->
  <!-- ok, offenbar sind die Bücher in der Library gemeint, die man in welt anklicken kann, zb. <GUID>123797</GUID> <Name>Book1PriestDailyLife</Name> -->
   <!-- wenn man diese anklickt öffnet sich ein buch popup, obwohl dieses objekt keine actions hat... -->
   <!-- klickt man book1 an, löst man damit auch Quest <GUID>128620</GUID><Name>Kidusi_04_EnteringLibrary_Book1</Name> -->
     <!-- aber zeitglich auch einen teil von Quest <GUID>123831</GUID><Name>Kidusi_IS_02_LibraryAccessGranted_12_Book1PriestDailyLife01</Name> -->
      <!-- und in eben dieser steht drin OnSuccessActions <ActionTriggerTextBook><Text>123816</Text> -->
   <!-- man kann für alle 6 books dasselbe unlock nehmen -->
  <ModOp Type="replace" GUID='128634' Path="Values/Trigger/TriggerCondition[Values/ConditionEvent[ContextData='TextPopup' and ConditionEvent='LeaveUIState']]">
    <TriggerCondition>
      <Template>ConditionUnlocked</Template>
      <Values>
        <Condition />
        <ConditionUnlocked>
          <UnlockNeeded>1500004371</UnlockNeeded>
        </ConditionUnlocked>
        <ConditionPropsNegatable />
      </Values>
    </TriggerCondition>
  </ModOp>
  <ModOp Type="add" GUID='123831,123832,123833,123834,123835,123836' Path="/Values/Objectives/WinConditions/Item/Objective/Values/ConditionQuestObjective/OnSuccessActions/Values/ActionList/Actions">
    <Item>
      <Action>
        <Template>ActionDelayedActions</Template>
        <Values>
          <Action />
          <ActionDelayedActions>
            <ExecutionDelay>20000</ExecutionDelay>
            <DelayedActions>
              <IsBaseAutoCreateAsset>1</IsBaseAutoCreateAsset>
              <Values>
                <ActionList>
                  <Actions>
                    <Item>
                      <Action>
                        <Template>ActionUnlockAsset</Template>
                        <Values>
                          <Action />
                          <ActionUnlockAsset>
                            <UnlockAssets>
                              <Item>
                                <Asset>1500004371</Asset>
                              </Item>
                            </UnlockAssets>
                          </ActionUnlockAsset>
                        </Values>
                      </Action>
                    </Item>
                  </Actions>
                </ActionList>
              </Values>
            </DelayedActions>
          </ActionDelayedActions>
        </Values>
      </Action>
    </Item>
  </ModOp>
  
  
  
  <!-- LeaveUIState TextPopup Kidusi_16_AlteredFacts_PopUpLayla_TRIGGER 128812 -->
  <!-- gehört vermutlich zu TutorialQuest 128780, aber vorsichtshalber dnnoch mit aufnehmen, auch wenn diese wohl nicht im MP starten -->
  <ModOp Type="replace" GUID='128812' Path="Values/Trigger/TriggerCondition[Values/ConditionEvent[ContextData='TextPopup' and ConditionEvent='LeaveUIState']]">
    <TriggerCondition>
      <Template>ConditionUnlocked</Template>
      <Values>
        <Condition />
        <ConditionUnlocked>
          <UnlockNeeded>1500004372</UnlockNeeded>
        </ConditionUnlocked>
        <ConditionPropsNegatable />
      </Values>
    </TriggerCondition>
  </ModOp>
  <!-- 128780 Kidusi_IS_16_AlteredFacts_66_LaylaTable_01 -->
  <ModOp Type="add" GUID='128780' Path="/Values/Objectives/WinConditions/Item/Objective/Values/ConditionQuestObjective/OnSuccessActions/Values/ActionList/Actions/Item/Action/Values/ActionDelayedActions/DelayedActions/Values/ActionList/Actions">
    <Item>
      <Action>
        <Template>ActionDelayedActions</Template>
        <Values>
          <Action />
          <ActionDelayedActions>
            <ExecutionDelay>20000</ExecutionDelay>
            <DelayedActions>
              <IsBaseAutoCreateAsset>1</IsBaseAutoCreateAsset>
              <Values>
                <ActionList>
                  <Actions>
                    <Item>
                      <Action>
                        <Template>ActionUnlockAsset</Template>
                        <Values>
                          <Action />
                          <ActionUnlockAsset>
                            <UnlockAssets>
                              <Item>
                                <Asset>1500004372</Asset>
                              </Item>
                            </UnlockAssets>
                          </ActionUnlockAsset>
                        </Values>
                      </Action>
                    </Item>
                  </Actions>
                </ActionList>
              </Values>
            </DelayedActions>
          </ActionDelayedActions>
        </Values>
      </Action>
    </Item>
  </ModOp>
  
  <!-- LeaveUIState TextPopup Trigger Book on Zoology Read 130675 -->
   <!-- wird registered in OnQuestStart 130673 -->
  <ModOp Type="replace" GUID='130675' Path="/Values/Trigger/SubTriggers/Item/SubTrigger/Values/Trigger/TriggerCondition[Values/ConditionEvent[ContextData='TextPopup' and ConditionEvent='LeaveUIState']]">
    <TriggerCondition>
      <Template>ConditionUnlocked</Template>
      <Values>
        <Condition />
        <ConditionUnlocked>
          <UnlockNeeded>1500004373</UnlockNeeded>
        </ConditionUnlocked>
        <ConditionPropsNegatable />
      </Values>
    </TriggerCondition>
  </ModOp>
  <!-- wir ersetzen auch die main conditition, da diese mit ConditionObjectSelected nur wegen dem LeaveUIState nötig ist, da das nicht zielgerichtet prüfen kann. -->
   <!-- mit unserm UnlockNeeded welches unlocked wird wenn ObjectSelected ist, ist das aber bereits sicher, daher nicht nötig. -->
    <!-- und außerdem werden subconditions nicht mehr geprüft, wenn main condition unwahr wird, was sie durch den Delay und ConditionObjectSelected werden könnte und daher nicht triggern würde -->
  <ModOp Type="replace" GUID='130675' Path="/Values/Trigger/TriggerCondition[Values/ConditionObjectSelected]">
    <TriggerCondition>
      <IsBaseAutoCreateAsset>1</IsBaseAutoCreateAsset>
      <Values>
        <Condition />
        <ConditionAlwaysTrue />
      </Values>
    </TriggerCondition>
  </ModOp>
  <!-- 131355 Kidusi_IS_01_Initial_132_BookOnZoology_01 -->
  <ModOp Type="add" GUID='131355' Path="/Values/Objectives/WinConditions/Item/Objective/Values/ConditionQuestObjective/OnSuccessActions/Values/ActionList/Actions">
    <Item>
      <Action>
        <Template>ActionDelayedActions</Template>
        <Values>
          <Action />
          <ActionDelayedActions>
            <ExecutionDelay>20000</ExecutionDelay>
            <DelayedActions>
              <IsBaseAutoCreateAsset>1</IsBaseAutoCreateAsset>
              <Values>
                <ActionList>
                  <Actions>
                    <Item>
                      <Action>
                        <Template>ActionUnlockAsset</Template>
                        <Values>
                          <Action />
                          <ActionUnlockAsset>
                            <UnlockAssets>
                              <Item>
                                <Asset>1500004373</Asset>
                              </Item>
                            </UnlockAssets>
                          </ActionUnlockAsset>
                        </Values>
                      </Action>
                    </Item>
                  </Actions>
                </ActionList>
              </Values>
            </DelayedActions>
          </ActionDelayedActions>
        </Values>
      </Action>
    </Item>
  </ModOp>
  
  <!-- LeaveUIState TextPopup Close Pop Up Book 128636 -->
  <!-- wird registered in OnQuestSucceeded 128635 Chronicles_03_LibraryTreasures_HiddenTrigger , welches wincondition quest 128621 oder 128623 hat -->
   <!-- welche wiederum das anlklicken von objekten als ziel hat was auch in quest 123832/123834 das ziel ist und da wird ActionTriggerTextBook gemacht -->
    <!-- es gibt offenbar mehrere Quests die 128621/128623 unter anderem als windcondition haben, denn 123832/123834 hatten wir schon -->
    <!-- dh. wir nutzen hier denselben Unlock wie oben 1500004371 und gehen davon aus, dass es entweder/oder Quests sind, also wir dieselben books nicht mehrfach LeaveUIState brauchen... TODO sollte man evlt überprüfen -->
  <ModOp Type="replace" GUID='128636' Path="/Values/Trigger/TriggerCondition[Values/ConditionEvent[ContextData='TextPopup' and ConditionEvent='LeaveUIState']]">
    <TriggerCondition>
      <Template>ConditionUnlocked</Template>
      <Values>
        <Condition />
        <ConditionUnlocked>
          <UnlockNeeded>1500004371</UnlockNeeded>
        </ConditionUnlocked>
        <ConditionPropsNegatable />
      </Values>
    </TriggerCondition>
  </ModOp>
  
  <!-- TODO ActionTriggerTextBook wird noch verwendet in (gucken ob sich darauf auch ein LeaveUIState beziehen könnte): -->
  <!-- <ActionTriggerTextBook><Text>131322</Text> in OnSuccessActions von Quest 131237 beim select <ObjectGUID>128350</ObjectGUID> -->
  <!-- <ActionTriggerTextBook><Text>131323</Text> in OnSuccessActions von Quest 131326 Kidusi_IS_28_NewBooksAvailable_101_Book08GovernorsofK_01 beim select <ObjectGUID>128351</ObjectGUID> -->
  <!-- <ActionTriggerTextBook><Text>131327</Text> in OnSuccessActions von Quest 131336 Kidusi_IS_28_NewBooksAvailable_101_Book09OnTheOldWorld_01 beim select <ObjectGUID>128352</ObjectGUID> -->
  <!-- <ActionTriggerTextBook><Text>131328</Text> in OnSuccessActions von Quest 131337 Kidusi_IS_01_Initial_132_Book11SymbolsOfEnbesa_01 beim select <ObjectGUID>131075</ObjectGUID> -->
  
  <!-- <ActionTriggerTextBook><Text>105628</Text> in ItemWithUI von Item 105623 QI Fishing Book -> dazu gibts vermutlich keine LeaveUIState condition -->
  
  
  
  
  <!-- LeaveUIState TextPopup Close Pop Up SilverNotes 132228 , wird zumselben Zeitpunkt registered, wo ActionTriggerTextPopup gemacht wird -->
  <ModOp Type="replace" GUID='132228' Path="/Values/Trigger/TriggerCondition[Values/ConditionEvent[ContextData='TextPopup' and ConditionEvent='LeaveUIState']]">
    <TriggerCondition>
      <Template>ConditionTimer</Template>
      <Values>
        <Condition />
        <ConditionTimer>
          <TimeLimit>15000</TimeLimit>
        </ConditionTimer>
      </Values>
    </TriggerCondition>
  </ModOp>
  
  <!-- LeaveUIState TextPopup Close Pop Up BronzeNotes 132313 , wird zumselben Zeitpunkt registered, wo ActionTriggerTextPopup gemacht wird -->
  <ModOp Type="replace" GUID='132313' Path="/Values/Trigger/TriggerCondition[Values/ConditionEvent[ContextData='TextPopup' and ConditionEvent='LeaveUIState']]">
    <TriggerCondition>
      <Template>ConditionTimer</Template>
      <Values>
        <Condition />
        <ConditionTimer>
          <TimeLimit>15000</TimeLimit>
        </ConditionTimer>
      </Values>
    </TriggerCondition>
  </ModOp>
  
  <!-- LeaveUIState NewspaperSpecialEdition Docklands Trigger Newspaper Closed 132149 , wird zumselben Zeitpunkt registered, wo zeitung gertiggert wird -->
  <ModOp Type="replace" GUID='132149' Path="/Values/Trigger/SubTriggers/Item/SubTrigger/Values/Trigger/TriggerCondition[Values/ConditionEvent[ContextData='NewspaperSpecialEdition' and ConditionEvent='LeaveUIState']]">
    <TriggerCondition>
      <Template>ConditionTimer</Template>
      <Values>
        <Condition />
        <ConditionTimer>
          <TimeLimit>10000</TimeLimit>
        </ConditionTimer>
      </Values>
    </TriggerCondition>
  </ModOp>
  
  <!-- LeaveUIState NewspaperSpecialEdition Tourists Trigger Newspaper Closed 133922 , wird zumselben Zeitpunkt registered, wo zeitung gertiggert wird -->
  <ModOp Type="replace" GUID='133922' Path="/Values/Trigger/SubTriggers/Item/SubTrigger/Values/Trigger/TriggerCondition[Values/ConditionEvent[ContextData='NewspaperSpecialEdition' and ConditionEvent='LeaveUIState']]">
    <TriggerCondition>
      <Template>ConditionTimer</Template>
      <Values>
        <Condition />
        <ConditionTimer>
          <TimeLimit>10000</TimeLimit>
        </ConditionTimer>
      </Values>
    </TriggerCondition>
  </ModOp>
  
  <!-- LeaveUIState NewspaperSpecialEdition HighLife Trigger Newspaper Closed 135904 , wird zumselben Zeitpunkt registered, wo zeitung gertiggert wird -->
  <ModOp Type="replace" GUID='135904' Path="/Values/Trigger/SubTriggers/Item/SubTrigger/Values/Trigger/TriggerCondition[Values/ConditionEvent[ContextData='NewspaperSpecialEdition' and ConditionEvent='LeaveUIState']]">
    <TriggerCondition>
      <Template>ConditionTimer</Template>
      <Values>
        <Condition />
        <ConditionTimer>
          <TimeLimit>10000</TimeLimit>
        </ConditionTimer>
      </Values>
    </TriggerCondition>
  </ModOp>

  
  
  
  
  <!-- TODO: -->
    <!-- auch ConditionGUIEvent, ConditionTextPopupClosed und ConditionTextPopupPagesViewed machen? müsste man testen ob das auch desynced... -->
    <!-- ich fürchte das wird super schwierig, wenn da dann spezielle Dinge dabei sind, wo dann zb zu beginn des spiels der trigger registered ist und -->
     <!-- auslösen soll, wenn erstmalig iwas geöffnet wird... wenn das desynced haben wir n problem... -->
  
  <!-- ConditionGUIEvent mit QuickNavigationMap scheint nur was für console und tutorial zu sein, hier am besten -->
   <!-- weiterhin dafür sorgen, dass es im MP nicht true ist TODO (genauso wie bei allen anderen tutorials) -->
   <!-- ConditionGUIEvent RecipeBuilding ist auch tutorial -->
  <!-- ConditionTextPopupPagesViewed ist nur uplay erfolg. -->
  <!-- dh an sich kommt nur ConditionTextPopupClosed hinzu -->
  
  <!-- ################################################### -->
  <!-- Palace Built NewsPaper -->
  <!-- ################################################### -->
   <!-- for whatever reason the newspaper about that a palace was built is tight to 15 seconds after leaving the palace screen (LeaveUIState ObjectMenuPalace) first time and therefore incompatible to MP. -->
     <!-- I will change it that the newspaper simply happens 15 seconds after you built the palace, regardless if you are in palace screen or not -->
  <ModOp Type="replace" GUID='269184'>
    <Asset>
      <Template>Trigger</Template>
      <Values>
        <Standard>
          <GUID>269184</GUID>
          <Name>Palace Trigger Built</Name>
        </Standard>
        <Trigger>
          <TriggerCondition>
            <Template>ConditionIsDLCActive</Template>
            <Values>
              <Condition />
              <ConditionIsDLCActive>
                <DLCAssetList>
                  <Item>
                    <DLCAsset>410059</DLCAsset>
                  </Item>
                </DLCAssetList>
              </ConditionIsDLCActive>
              <ConditionPropsNegatable />
            </Values>
          </TriggerCondition>
          <TriggerActions>
            <Item>
              <TriggerAction>
                <Template>ActionRegisterTrigger</Template>
                <Values>
                  <Action />
                  <ActionRegisterTrigger>
                    <TriggerAsset>269557</TriggerAsset>
                  </ActionRegisterTrigger>
                </Values>
              </TriggerAction>
            </Item>
          </TriggerActions>
          <SubTriggers>
            <Item>
              <SubTrigger>
                <Template>AutoCreateTrigger</Template>
                <Values>
                  <Trigger>
                    <TriggerCondition>
                      <Template>ConditionUnlocked</Template>
                      <Values>
                        <Condition />
                        <ConditionUnlocked>
                          <UnlockNeeded>1500003811</UnlockNeeded>
                        </ConditionUnlocked>
                        <ConditionPropsNegatable />
                      </Values>
                    </TriggerCondition>
                  </Trigger>
                </Values>
              </SubTrigger>
            </Item>
            <Item>
              <SubTrigger>
                <Template>AutoCreateTrigger</Template>
                <Values>
                  <Trigger>
                    <TriggerCondition>
                      <Template>ConditionPlayerCounter</Template>
                      <Values>
                        <Condition />
                        <ConditionPlayerCounter>
                          <Context>249947</Context>
                          <CounterAmount>1</CounterAmount>
                        </ConditionPlayerCounter>
                      </Values>
                    </TriggerCondition>
                  </Trigger>
                </Values>
              </SubTrigger>
            </Item>
          </SubTriggers>
          <ResetTrigger>
            <IsBaseAutoCreateAsset>1</IsBaseAutoCreateAsset>
            <Values>
              <EmptyAutoCreateValue />
            </Values>
          </ResetTrigger>
        </Trigger>
        <TriggerSetup>
          <UsedBySecondParties>0</UsedBySecondParties>
        </TriggerSetup>
      </Values>
    </Asset>
  </ModOp>
  
      
   
</ModOps>