<ModOps>
  
  <!-- Make sure all pirate ships are leaving the map correctly (only after pirate is really defeated, not before and all ships) -->
  
  <!-- To make sure our pirate triggers are only excuted once, regardless how many human players exist (pirates can not execute triggers on their own) -->
   <!-- we make sure they are only executed for Human0 with help of my WhichPlayer shared mod checking for Unlock 1500001613 -->
     <!-- Even if Human0 is defeated andMP game continued without him, he will still continue executing Triggers -->


  <!-- 1500001145 is unlocked as long as pirate Harlow is not defeated -->
  <ModOp Type="addNextSibling" GUID="130248">
    <Asset>
      <Template>Trigger</Template>
      <Values>
        <Standard>
          <GUID>1500001117</GUID>
          <Name>WarFleet not leave map on Harbor Destroy Harlow</Name>
        </Standard>
        <Trigger>
          <TriggerCondition>
            <Template>ConditionUnlocked</Template>
            <Values>
              <Condition>
                <SubConditionCompletionOrder>MutuallyExclusive</SubConditionCompletionOrder>
              </Condition>
              <ConditionUnlocked>
                <UnlockNeeded>1500001613</UnlockNeeded>
              </ConditionUnlocked>
              <ConditionPropsNegatable />
            </Values>
          </TriggerCondition>
          <SubTriggers>
            <Item>
              <SubTrigger>
                <Template>AutoCreateTrigger</Template>
                <Values>
                  <Trigger>
                    <TriggerCondition>
                      <Template>ConditionPlayerCounter</Template>
                      <Values>
                        <Condition />
                        <ConditionPlayerCounter>
                          <PlayerCounter>RuinCount</PlayerCounter>
                          <Context>100681</Context>
                          <CounterAmount>1</CounterAmount>
                          <ComparisonOp>AtLeast</ComparisonOp>
                          <CheckSpecificParticipant>1</CheckSpecificParticipant>
                          <CheckedParticipant>Third_party_03_Pirate_Harlow</CheckedParticipant>
                          <CounterScope>Session</CounterScope>
                          <CounterScopeUseCurrentContext>0</CounterScopeUseCurrentContext>
                          <CounterScopeContext>180023</CounterScopeContext>
                        </ConditionPlayerCounter>
                      </Values>
                    </TriggerCondition>
                    <SubTriggers>
                      <Item>
                        <SubTrigger>
                          <Template>AutoCreateTrigger</Template>
                          <Values>
                            <Trigger>
                              <TriggerCondition>
                                <Template>ConditionTimer</Template>
                                <Values>
                                  <Condition />
                                  <ConditionTimer>
                                    <TimeLimit>1000</TimeLimit>
                                  </ConditionTimer>
                                </Values>
                              </TriggerCondition>
                              <SubTriggers>
                                <Item>
                                  <SubTrigger>
                                    <Template>AutoCreateTrigger</Template>
                                    <Values>
                                      <Trigger>
                                        <TriggerCondition>
                                          <Template>ConditionUnlocked</Template>
                                          <Values>
                                            <Condition />
                                            <ConditionUnlocked>
                                              <UnlockNeeded>1500001145</UnlockNeeded>
                                            </ConditionUnlocked>
                                            <ConditionPropsNegatable />
                                          </Values>
                                        </TriggerCondition>
                                        <TriggerActions>
                                          <Item>
                                            <TriggerAction>
                                              <Template>ActionDelayedActions</Template>
                                              <Values>
                                                <Action />
                                                <ActionDelayedActions>
                                                  <ExecutionDelay>1000</ExecutionDelay>
                                                  <DelayedActions>
                                                    <IsBaseAutoCreateAsset>1</IsBaseAutoCreateAsset>
                                                    <Values>
                                                      <ActionList>
                                                        <Actions>
                                                          <Item>
                                                            <Action>
                                                              <Template>ActionMoveObject</Template>
                                                              <Values>
                                                                <Action />
                                                                <ObjectFilter>
                                                                  <ObjectGUID>700138</ObjectGUID>
                                                                  <CheckParticipantID>1</CheckParticipantID>
                                                                  <ObjectParticipantID>Neutral</ObjectParticipantID>
                                                                  <ObjectSession>180023</ObjectSession>
                                                                </ObjectFilter>
                                                                <ObjectTargetFilter>
                                                                  <TargetGUID>100681</TargetGUID>
                                                                  <TargetCheckParticipantID>1</TargetCheckParticipantID>
                                                                  <TargetParticipantID>Third_party_03_Pirate_Harlow</TargetParticipantID>
                                                                  <TargetObjectSession>180023</TargetObjectSession>
                                                                </ObjectTargetFilter>
                                                                <ActionMoveObject>
                                                                  <IgnoreEveryDistractionDuringMove>0</IgnoreEveryDistractionDuringMove>
                                                                  <UseDangerLayer>1</UseDangerLayer>
                                                                  <SearchMode>Closest</SearchMode>
                                                                </ActionMoveObject>
                                                              </Values>
                                                            </Action>
                                                          </Item>
                                                          <Item>
                                                            <Action>
                                                              <Template>ActionChangeParticipant</Template>
                                                              <Values>
                                                                <Action />
                                                                <ActionChangeParticipant>
                                                                  <NewParticipantID>Third_party_03_Pirate_Harlow</NewParticipantID>
                                                                </ActionChangeParticipant>
                                                                <ObjectFilter>
                                                                  <ObjectGUID>700138</ObjectGUID>
                                                                  <CheckParticipantID>1</CheckParticipantID>
                                                                  <ObjectParticipantID>Neutral</ObjectParticipantID>
                                                                  <ObjectSession>180023</ObjectSession>
                                                                </ObjectFilter>
                                                              </Values>
                                                            </Action>
                                                          </Item>
                                                        </Actions>
                                                      </ActionList>
                                                    </Values>
                                                  </DelayedActions>
                                                </ActionDelayedActions>
                                              </Values>
                                            </TriggerAction>
                                          </Item>
                                        </TriggerActions>
                                      </Trigger>
                                    </Values>
                                  </SubTrigger>
                                </Item>
                              </SubTriggers>
                            </Trigger>
                          </Values>
                        </SubTrigger>
                      </Item>
                    </SubTriggers>
                  </Trigger>
                </Values>
              </SubTrigger>
            </Item>
          </SubTriggers>
          <ResetTrigger>
            <Template>AutoCreateTrigger</Template>
            <Values>
              <Trigger>
                <TriggerCondition>
                  <Template>ConditionPlayerCounter</Template>
                  <Values>
                    <Condition />
                    <ConditionPlayerCounter>
                      <PlayerCounter>RuinCount</PlayerCounter>
                      <Context>100681</Context>
                      <CounterAmount>0</CounterAmount>
                      <ComparisonOp>AtMost</ComparisonOp>
                      <CheckSpecificParticipant>1</CheckSpecificParticipant>
                      <CheckedParticipant>Third_party_03_Pirate_Harlow</CheckedParticipant>
                      <CounterScope>Session</CounterScope>
                      <CounterScopeUseCurrentContext>0</CounterScopeUseCurrentContext>
                      <CounterScopeContext>180023</CounterScopeContext>
                    </ConditionPlayerCounter>
                  </Values>
                </TriggerCondition>
              </Trigger>
            </Values>
          </ResetTrigger>
        </Trigger>
        <TriggerSetup>
          <AutoRegisterTrigger>1</AutoRegisterTrigger>
          <UsedBySecondParties>0</UsedBySecondParties>
        </TriggerSetup>
      </Values>
    </Asset>
    
    <!-- 1500001146 is unlocked as long as pirate LaFortune is not defeated -->
    <Asset>
      <Template>Trigger</Template>
      <Values>
        <Standard>
          <GUID>1500001118</GUID>
          <Name>WarFleet not leave map on Harbor Destroy LaFortune</Name>
        </Standard>
        <Trigger>
          <TriggerCondition>
            <Template>ConditionUnlocked</Template>
            <Values>
              <Condition>
                <SubConditionCompletionOrder>MutuallyExclusive</SubConditionCompletionOrder>
              </Condition>
              <ConditionUnlocked>
                <UnlockNeeded>1500001613</UnlockNeeded>
              </ConditionUnlocked>
              <ConditionPropsNegatable />
            </Values>
          </TriggerCondition>
          <SubTriggers>
            <Item>
              <SubTrigger>
                <Template>AutoCreateTrigger</Template>
                <Values>
                  <Trigger>
                    <TriggerCondition>
                      <Template>ConditionPlayerCounter</Template>
                      <Values>
                        <Condition />
                        <ConditionPlayerCounter>
                          <PlayerCounter>RuinCount</PlayerCounter>
                          <Context>100682</Context>
                          <CounterAmount>1</CounterAmount>
                          <ComparisonOp>AtLeast</ComparisonOp>
                          <CheckSpecificParticipant>1</CheckSpecificParticipant>
                          <CheckedParticipant>Third_party_04_Pirate_LaFortune</CheckedParticipant>
                          <CounterScope>Session</CounterScope>
                          <CounterScopeUseCurrentContext>0</CounterScopeUseCurrentContext>
                          <CounterScopeContext>180025</CounterScopeContext>
                        </ConditionPlayerCounter>
                      </Values>
                    </TriggerCondition>
                    <SubTriggers>
                      <Item>
                        <SubTrigger>
                          <Template>AutoCreateTrigger</Template>
                          <Values>
                            <Trigger>
                              <TriggerCondition>
                                <Template>ConditionTimer</Template>
                                <Values>
                                  <Condition />
                                  <ConditionTimer>
                                    <TimeLimit>1000</TimeLimit>
                                  </ConditionTimer>
                                </Values>
                              </TriggerCondition>
                              <SubTriggers>
                                <Item>
                                  <SubTrigger>
                                    <Template>AutoCreateTrigger</Template>
                                    <Values>
                                      <Trigger>
                                        <TriggerCondition>
                                          <Template>ConditionUnlocked</Template>
                                          <Values>
                                            <Condition />
                                            <ConditionUnlocked>
                                              <UnlockNeeded>1500001146</UnlockNeeded>
                                            </ConditionUnlocked>
                                            <ConditionPropsNegatable />
                                          </Values>
                                        </TriggerCondition>
                                        <TriggerActions>
                                          <Item>
                                            <TriggerAction>
                                              <Template>ActionDelayedActions</Template>
                                              <Values>
                                                <Action />
                                                <ActionDelayedActions>
                                                  <ExecutionDelay>1000</ExecutionDelay>
                                                  <DelayedActions>
                                                    <IsBaseAutoCreateAsset>1</IsBaseAutoCreateAsset>
                                                    <Values>
                                                      <ActionList>
                                                        <Actions>
                                                          <Item>
                                                            <Action>
                                                              <Template>ActionMoveObject</Template>
                                                              <Values>
                                                                <Action />
                                                                <ObjectFilter>
                                                                  <ObjectGUID>700138</ObjectGUID>
                                                                  <CheckParticipantID>1</CheckParticipantID>
                                                                  <ObjectParticipantID>Neutral</ObjectParticipantID>
                                                                  <ObjectSession>180025</ObjectSession>
                                                                </ObjectFilter>
                                                                <ObjectTargetFilter>
                                                                  <TargetGUID>100682</TargetGUID>
                                                                  <TargetCheckParticipantID>1</TargetCheckParticipantID>
                                                                  <TargetParticipantID>Third_party_04_Pirate_LaFortune</TargetParticipantID>
                                                                  <TargetObjectSession>180025</TargetObjectSession>
                                                                </ObjectTargetFilter>
                                                                <ActionMoveObject>
                                                                  <IgnoreEveryDistractionDuringMove>0</IgnoreEveryDistractionDuringMove>
                                                                  <UseDangerLayer>1</UseDangerLayer>
                                                                  <SearchMode>Closest</SearchMode>
                                                                </ActionMoveObject>
                                                              </Values>
                                                            </Action>
                                                          </Item>
                                                          <Item>
                                                            <Action>
                                                              <Template>ActionChangeParticipant</Template>
                                                              <Values>
                                                                <Action />
                                                                <ActionChangeParticipant>
                                                                  <NewParticipantID>Third_party_04_Pirate_LaFortune</NewParticipantID>
                                                                </ActionChangeParticipant>
                                                                <ObjectFilter>
                                                                  <ObjectGUID>700138</ObjectGUID>
                                                                  <CheckParticipantID>1</CheckParticipantID>
                                                                  <ObjectParticipantID>Neutral</ObjectParticipantID>
                                                                  <ObjectSession>180025</ObjectSession>
                                                                </ObjectFilter>
                                                              </Values>
                                                            </Action>
                                                          </Item>
                                                        </Actions>
                                                      </ActionList>
                                                    </Values>
                                                  </DelayedActions>
                                                </ActionDelayedActions>
                                              </Values>
                                            </TriggerAction>
                                          </Item>
                                        </TriggerActions>
                                      </Trigger>
                                    </Values>
                                  </SubTrigger>
                                </Item>
                              </SubTriggers>
                            </Trigger>
                          </Values>
                        </SubTrigger>
                      </Item>
                    </SubTriggers>
                  </Trigger>
                </Values>
              </SubTrigger>
            </Item>
          </SubTriggers>
          <ResetTrigger>
            <Template>AutoCreateTrigger</Template>
            <Values>
              <Trigger>
                <TriggerCondition>
                  <Template>ConditionPlayerCounter</Template>
                  <Values>
                    <Condition />
                    <ConditionPlayerCounter>
                      <PlayerCounter>RuinCount</PlayerCounter>
                      <Context>100682</Context>
                      <CounterAmount>0</CounterAmount>
                      <ComparisonOp>AtMost</ComparisonOp>
                      <CheckSpecificParticipant>1</CheckSpecificParticipant>
                      <CheckedParticipant>Third_party_04_Pirate_LaFortune</CheckedParticipant>
                      <CounterScope>Session</CounterScope>
                      <CounterScopeUseCurrentContext>0</CounterScopeUseCurrentContext>
                      <CounterScopeContext>180025</CounterScopeContext>
                    </ConditionPlayerCounter>
                  </Values>
                </TriggerCondition>
              </Trigger>
            </Values>
          </ResetTrigger>
        </Trigger>
        <TriggerSetup>
          <AutoRegisterTrigger>1</AutoRegisterTrigger>
          <UsedBySecondParties>0</UsedBySecondParties>
        </TriggerSetup>
      </Values>
    </Asset>
    
    
    <Asset>
      <Template>Trigger</Template>
      <Values>
        <Standard>
          <GUID>1500001119</GUID>
          <Name>All Pirate Ships Leave Map On Destroy</Name>
        </Standard>
        <Trigger>
          <TriggerCondition>
            <Template>ConditionUnlocked</Template>
            <Values>
              <Condition>
                <SubConditionCompletionOrder>MutuallyExclusive</SubConditionCompletionOrder>
              </Condition>
              <ConditionUnlocked>
                <UnlockNeeded>1500001613</UnlockNeeded>
              </ConditionUnlocked>
              <ConditionPropsNegatable />
            </Values>
          </TriggerCondition>
          <SubTriggers>
            <Item>
              <SubTrigger>
                <Template>AutoCreateTrigger</Template>
                <Values>
                  <Trigger>
                    <TriggerCondition>
                      <Template>ConditionEvent</Template>
                      <Values>
                        <Condition/>
                        <ConditionEvent>
                          <ConditionEvent>GUIDUnlocked</ConditionEvent>
                          <ContextAsset>1500001149</ContextAsset>
                          <ContextAssetInfolayer>0</ContextAssetInfolayer>
                        </ConditionEvent>
                        <ConditionPropsNegatable/>
                      </Values>
                    </TriggerCondition>
                    <TriggerActions> 
                      <Item>
                        <TriggerAction>
                          <Template>ActionDelayedActions</Template>
                          <Values>
                            <Action />
                            <ActionDelayedActions>
                              <ExecutionDelay>2000</ExecutionDelay>
                              <DelayedActions>
                                <IsBaseAutoCreateAsset>1</IsBaseAutoCreateAsset>
                                <Values>
                                  <ActionList>
                                    <Actions>
                                      <Item>
                                        <Action>
                                          <Template>ActionChangeParticipant</Template>
                                          <Values>
                                            <Action />
                                            <ActionChangeParticipant>
                                              <NewParticipantID>Neutral</NewParticipantID>
                                            </ActionChangeParticipant>
                                            <ObjectFilter>
                                              <ObjectGUID>700138</ObjectGUID>
                                              <ObjectSession>180023</ObjectSession>
                                              <CheckParticipantID>1</CheckParticipantID>
                                              <ObjectParticipantID>Third_party_03_Pirate_Harlow</ObjectParticipantID>
                                            </ObjectFilter>
                                          </Values>
                                        </Action>
                                      </Item>
                                    </Actions>
                                  </ActionList>
                                </Values>
                              </DelayedActions>
                            </ActionDelayedActions>
                          </Values>
                        </TriggerAction>
                      </Item>
                      <Item>
                        <TriggerAction>
                          <Template>ActionDelayedActions</Template>
                          <Values>
                            <Action />
                            <ActionDelayedActions>
                              <ExecutionDelay>3000</ExecutionDelay>
                              <DelayedActions>
                                <IsBaseAutoCreateAsset>1</IsBaseAutoCreateAsset>
                                <Values>
                                  <ActionList>
                                    <Actions>
                                      <Item>
                                        <Action>
                                          <Template>ActionDeleteObjects</Template>
                                          <Values>
                                            <Action />
                                            <ActionDeleteObjects>
                                              <ShipsLeaveMapFirst>1</ShipsLeaveMapFirst>
                                            </ActionDeleteObjects>
                                            <ObjectFilter>
                                              <ObjectGUID>700138</ObjectGUID>
                                              <CheckParticipantID>1</CheckParticipantID>
                                              <ObjectParticipantID>Neutral</ObjectParticipantID>
                                              <ObjectSession>180023</ObjectSession>
                                            </ObjectFilter>
                                          </Values>
                                        </Action>
                                      </Item>
                                    </Actions>
                                  </ActionList>
                                </Values>
                              </DelayedActions>
                            </ActionDelayedActions>
                          </Values>
                        </TriggerAction>
                      </Item>
                    </TriggerActions>
                  </Trigger>
                </Values>
              </SubTrigger>
            </Item>
            <Item>
              <SubTrigger>
                <Template>AutoCreateTrigger</Template>
                <Values>
                  <Trigger>
                    <TriggerCondition>
                      <Template>ConditionEvent</Template>
                      <Values>
                        <Condition/>
                        <ConditionEvent>
                          <ConditionEvent>GUIDUnlocked</ConditionEvent>
                          <ContextAsset>1500004533</ContextAsset>
                          <ContextAssetInfolayer>0</ContextAssetInfolayer>
                        </ConditionEvent>
                        <ConditionPropsNegatable/>
                      </Values>
                    </TriggerCondition>
                    <TriggerActions> 
                      <Item>
                        <TriggerAction>
                          <Template>ActionDelayedActions</Template>
                          <Values>
                            <Action />
                            <ActionDelayedActions>
                              <ExecutionDelay>2000</ExecutionDelay>
                              <DelayedActions>
                                <IsBaseAutoCreateAsset>1</IsBaseAutoCreateAsset>
                                <Values>
                                  <ActionList>
                                    <Actions>
                                      <Item>
                                        <Action>
                                          <Template>ActionChangeParticipant</Template>
                                          <Values>
                                            <Action />
                                            <ActionChangeParticipant>
                                              <NewParticipantID>Neutral</NewParticipantID>
                                            </ActionChangeParticipant>
                                            <ObjectFilter>
                                              <ObjectGUID>700138</ObjectGUID>
                                              <ObjectSession>180025</ObjectSession>
                                              <CheckParticipantID>1</CheckParticipantID>
                                              <ObjectParticipantID>Third_party_04_Pirate_LaFortune</ObjectParticipantID>
                                            </ObjectFilter>
                                          </Values>
                                        </Action>
                                      </Item>
                                    </Actions>
                                  </ActionList>
                                </Values>
                              </DelayedActions>
                            </ActionDelayedActions>
                          </Values>
                        </TriggerAction>
                      </Item>
                      <Item>
                        <TriggerAction>
                          <Template>ActionDelayedActions</Template>
                          <Values>
                            <Action />
                            <ActionDelayedActions>
                              <ExecutionDelay>3000</ExecutionDelay>
                              <DelayedActions>
                                <IsBaseAutoCreateAsset>1</IsBaseAutoCreateAsset>
                                <Values>
                                  <ActionList>
                                    <Actions>
                                      <Item>
                                        <Action>
                                          <Template>ActionDeleteObjects</Template>
                                          <Values>
                                            <Action />
                                            <ActionDeleteObjects>
                                              <ShipsLeaveMapFirst>1</ShipsLeaveMapFirst>
                                            </ActionDeleteObjects>
                                            <ObjectFilter>
                                              <ObjectGUID>700138</ObjectGUID>
                                              <CheckParticipantID>1</CheckParticipantID>
                                              <ObjectParticipantID>Neutral</ObjectParticipantID>
                                              <ObjectSession>180025</ObjectSession>
                                            </ObjectFilter>
                                          </Values>
                                        </Action>
                                      </Item>
                                    </Actions>
                                  </ActionList>
                                </Values>
                              </DelayedActions>
                            </ActionDelayedActions>
                          </Values>
                        </TriggerAction>
                      </Item>
                    </TriggerActions>
                  </Trigger>
                </Values>
              </SubTrigger>
            </Item>
          </SubTriggers>
          <ResetTrigger>
            <Template>AutoCreateTrigger</Template>
            <Values>
              <Trigger>
                <TriggerCondition>
                  <IsBaseAutoCreateAsset>1</IsBaseAutoCreateAsset>
                  <Values>
                    <Condition />
                    <ConditionAlwaysTrue />
                  </Values>
                </TriggerCondition>
              </Trigger>
            </Values>
          </ResetTrigger>
        </Trigger>
        <TriggerSetup>
          <AutoRegisterTrigger>1</AutoRegisterTrigger>
          <UsedBySecondParties>0</UsedBySecondParties>
        </TriggerSetup>
      </Values>
    </Asset>
    
  </ModOp>
  
</ModOps>